if(function($,undefined){function setDefaults(d){$.extend(!0,defaults,d)}function Calendar(element,options,eventSources){function render(inc){content?elementVisible()&&(calcSize(),_renderView(inc)):initialRender()}function initialRender(){tm=options.theme?"ui":"fc",element.addClass("fc"),element.addClass(options.isRTL?"fc-rtl":"fc-ltr"),options.theme&&element.addClass("ui-widget"),content=$("<div class='fc-content' style='position:relative'/>").prependTo(element),header=new Header(t,options),headerElement=header.render(),headerElement&&element.prepend(headerElement),changeView(options.defaultView),options.handleWindowResize&&$(window).resize(windowResize),bodyVisible()||lateRender()}function lateRender(){setTimeout(function(){!currentView.start&&bodyVisible()&&renderView()},0)}function destroy(){currentView&&(trigger("viewDestroy",currentView,currentView,currentView.element),currentView.triggerEventDestroy()),$(window).unbind("resize",windowResize),header.destroy(),content.remove(),element.removeClass("fc fc-rtl ui-widget")}function elementVisible(){return element.is(":visible")}function bodyVisible(){return $("body").is(":visible")}function changeView(newViewName){currentView&&newViewName==currentView.name||_changeView(newViewName)}function _changeView(newViewName){ignoreWindowResize++,currentView&&(trigger("viewDestroy",currentView,currentView,currentView.element),unselect(),currentView.triggerEventDestroy(),freezeContentHeight(),currentView.element.remove(),header.deactivateButton(currentView.name)),header.activateButton(newViewName),currentView=new fcViews[newViewName]($("<div class='fc-view fc-view-"+newViewName+"' style='position:relative'/>").appendTo(content),t),renderView(),unfreezeContentHeight(),ignoreWindowResize--}function renderView(inc){(!currentView.start||inc||date<currentView.start||date>=currentView.end)&&elementVisible()&&_renderView(inc)}function _renderView(inc){ignoreWindowResize++,currentView.start&&(trigger("viewDestroy",currentView,currentView,currentView.element),unselect(),clearEvents()),freezeContentHeight(),currentView.render(date,inc||0),setSize(),unfreezeContentHeight(),(currentView.afterRender||noop)(),updateTitle(),updateTodayButton(),trigger("viewRender",currentView,currentView,currentView.element),currentView.trigger("viewDisplay",_element),ignoreWindowResize--,getAndRenderEvents()}function updateSize(){elementVisible()&&(unselect(),clearEvents(),calcSize(),setSize(),renderEvents())}function calcSize(){suggestedViewHeight=options.contentHeight?options.contentHeight:options.height?options.height-(headerElement?headerElement.height():0)-vsides(content):Math.round(content.width()/Math.max(options.aspectRatio,.5))}function setSize(){suggestedViewHeight===undefined&&calcSize(),ignoreWindowResize++,currentView.setHeight(suggestedViewHeight),currentView.setWidth(content.width()),ignoreWindowResize--,elementOuterWidth=element.outerWidth()}function windowResize(){if(!ignoreWindowResize)if(currentView.start){var uid=++resizeUID;setTimeout(function(){uid==resizeUID&&!ignoreWindowResize&&elementVisible()&&elementOuterWidth!=(elementOuterWidth=element.outerWidth())&&(ignoreWindowResize++,updateSize(),currentView.trigger("windowResize",_element),ignoreWindowResize--)},200)}else lateRender()}function refetchEvents(){clearEvents(),fetchAndRenderEvents()}function rerenderEvents(modifiedEventID){clearEvents(),renderEvents(modifiedEventID)}function renderEvents(modifiedEventID){elementVisible()&&(currentView.setEventData(events),currentView.renderEvents(events,modifiedEventID),currentView.trigger("eventAfterAllRender"))}function clearEvents(){currentView.triggerEventDestroy(),currentView.clearEvents(),currentView.clearEventData()}function getAndRenderEvents(){!options.lazyFetching||isFetchNeeded(currentView.visStart,currentView.visEnd)?fetchAndRenderEvents():renderEvents()}function fetchAndRenderEvents(){fetchEvents(currentView.visStart,currentView.visEnd)}function reportEvents(_events){events=_events,renderEvents()}function reportEventChange(eventID){rerenderEvents(eventID)}function updateTitle(){header.updateTitle(currentView.title)}function updateTodayButton(){var today=new Date;today>=currentView.start&&today<currentView.end?header.disableButton("today"):header.enableButton("today")}function select(start,end,allDay){currentView.select(start,end,allDay===undefined?!0:allDay)}function unselect(){currentView&&currentView.unselect()}function prev(){renderView(-1)}function next(){renderView(1)}function prevYear(){addYears(date,-1),renderView()}function nextYear(){addYears(date,1),renderView()}function today(){date=new Date,renderView()}function gotoDate(year,month,dateOfMonth){year instanceof Date?date=cloneDate(year):setYMD(date,year,month,dateOfMonth),renderView()}function incrementDate(years,months,days){years!==undefined&&addYears(date,years),months!==undefined&&addMonths(date,months),days!==undefined&&addDays(date,days),renderView()}function getDate(){return cloneDate(date)}function freezeContentHeight(){content.css({width:"100%",height:content.height(),overflow:"hidden"})}function unfreezeContentHeight(){content.css({width:"",height:"",overflow:""})}function getView(){return currentView}function option(name,value){return value===undefined?options[name]:void(("height"==name||"contentHeight"==name||"aspectRatio"==name)&&(options[name]=value,updateSize()))}function trigger(name,thisObj){return options[name]?options[name].apply(thisObj||_element,Array.prototype.slice.call(arguments,2)):void 0}var t=this;t.options=options,t.render=render,t.destroy=destroy,t.refetchEvents=refetchEvents,t.reportEvents=reportEvents,t.reportEventChange=reportEventChange,t.rerenderEvents=rerenderEvents,t.changeView=changeView,t.select=select,t.unselect=unselect,t.prev=prev,t.next=next,t.prevYear=prevYear,t.nextYear=nextYear,t.today=today,t.gotoDate=gotoDate,t.incrementDate=incrementDate,t.formatDate=function(format,date){return formatDate(format,date,options)},t.formatDates=function(format,date1,date2){return formatDates(format,date1,date2,options)},t.getDate=getDate,t.getView=getView,t.option=option,t.trigger=trigger,EventManager.call(t,options,eventSources);var header,headerElement,content,tm,currentView,elementOuterWidth,suggestedViewHeight,_dragElement,isFetchNeeded=t.isFetchNeeded,fetchEvents=t.fetchEvents,_element=element[0],resizeUID=0,ignoreWindowResize=0,date=new Date,events=[];setYMD(date,options.year,options.month,options.date),options.droppable&&$(document).bind("dragstart",function(ev,ui){var _e=ev.target,e=$(_e);if(!e.parents(".fc").length){var accept=options.dropAccept;($.isFunction(accept)?accept.call(_e,e):e.is(accept))&&(_dragElement=_e,currentView.dragStart(_dragElement,ev,ui))}}).bind("dragstop",function(ev,ui){_dragElement&&(currentView.dragStop(_dragElement,ev,ui),_dragElement=null)})}function Header(calendar,options){function render(){tm=options.theme?"ui":"fc";var sections=options.header;return sections?element=$("<table class='fc-header' style='width:100%'/>").append($("<tr/>").append(renderSection("left")).append(renderSection("center")).append(renderSection("right"))):void 0}function destroy(){element.remove()}function renderSection(position){var e=$("<td class='fc-header-"+position+"'/>"),buttonStr=options.header[position];return buttonStr&&$.each(buttonStr.split(" "),function(i){i>0&&e.append("<span class='fc-header-space'/>");var prevButton;$.each(this.split(","),function(j,buttonName){if("title"==buttonName)e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),prevButton&&prevButton.addClass(tm+"-corner-right"),prevButton=null;else{var buttonClick;if(calendar[buttonName]?buttonClick=calendar[buttonName]:fcViews[buttonName]&&(buttonClick=function(){button.removeClass(tm+"-state-hover"),calendar.changeView(buttonName)}),buttonClick){var icon=options.theme?smartProperty(options.buttonIcons,buttonName):null,text=smartProperty(options.buttonText,buttonName),button=$("<span class='fc-button fc-button-"+buttonName+" "+tm+"-state-default'>"+(icon?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+icon+"'/></span>":text)+"</span>").click(function(){button.hasClass(tm+"-state-disabled")||buttonClick()}).mousedown(function(){button.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-down")}).mouseup(function(){button.removeClass(tm+"-state-down")}).hover(function(){button.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-hover")},function(){button.removeClass(tm+"-state-hover").removeClass(tm+"-state-down")}).appendTo(e);disableTextSelection(button),prevButton||button.addClass(tm+"-corner-left"),prevButton=button}}}),prevButton&&prevButton.addClass(tm+"-corner-right")}),e}function updateTitle(html){element.find("h2").html(html)}function activateButton(buttonName){element.find("span.fc-button-"+buttonName).addClass(tm+"-state-active")}function deactivateButton(buttonName){element.find("span.fc-button-"+buttonName).removeClass(tm+"-state-active")}function disableButton(buttonName){element.find("span.fc-button-"+buttonName).addClass(tm+"-state-disabled")}function enableButton(buttonName){element.find("span.fc-button-"+buttonName).removeClass(tm+"-state-disabled")}var t=this;t.render=render,t.destroy=destroy,t.updateTitle=updateTitle,t.activateButton=activateButton,t.deactivateButton=deactivateButton,t.disableButton=disableButton,t.enableButton=enableButton;var tm,element=$([])}function EventManager(options,_sources){function isFetchNeeded(start,end){return!rangeStart||rangeStart>start||end>rangeEnd}function fetchEvents(start,end){rangeStart=start,rangeEnd=end,cache=[];var fetchID=++currentFetchID,len=sources.length;pendingSourceCnt=len;for(var i=0;len>i;i++)fetchEventSource(sources[i],fetchID)}function fetchEventSource(source,fetchID){_fetchEventSource(source,function(events){if(fetchID==currentFetchID){if(events){options.eventDataTransform&&(events=$.map(events,options.eventDataTransform)),source.eventDataTransform&&(events=$.map(events,source.eventDataTransform));for(var i=0;i<events.length;i++)events[i].source=source,normalizeEvent(events[i]);cache=cache.concat(events)}pendingSourceCnt--,pendingSourceCnt||reportEvents(cache)}})}function _fetchEventSource(source,callback){var i,res,fetchers=fc.sourceFetchers;for(i=0;i<fetchers.length;i++){if(res=fetchers[i](source,rangeStart,rangeEnd,callback),res===!0)return;if("object"==typeof res)return void _fetchEventSource(res,callback)}var events=source.events;if(events)$.isFunction(events)?(pushLoading(),events(cloneDate(rangeStart),cloneDate(rangeEnd),function(events){callback(events),popLoading()})):$.isArray(events)?callback(events):callback();else{var url=source.url;if(url){var customData,success=source.success,error=source.error,complete=source.complete;customData=$.isFunction(source.data)?source.data():source.data;var data=$.extend({},customData||{}),startParam=firstDefined(source.startParam,options.startParam),endParam=firstDefined(source.endParam,options.endParam);startParam&&(data[startParam]=Math.round(+rangeStart/1e3)),endParam&&(data[endParam]=Math.round(+rangeEnd/1e3)),pushLoading(),$.ajax($.extend({},ajaxDefaults,source,{data:data,success:function(events){events=events||[];var res=applyAll(success,this,arguments);$.isArray(res)&&(events=res),callback(events)},error:function(){applyAll(error,this,arguments),callback()},complete:function(){applyAll(complete,this,arguments),popLoading()}}))}else callback()}}function addEventSource(source){source=_addEventSource(source),source&&(pendingSourceCnt++,fetchEventSource(source,currentFetchID))}function _addEventSource(source){return $.isFunction(source)||$.isArray(source)?source={events:source}:"string"==typeof source&&(source={url:source}),"object"==typeof source?(normalizeSource(source),sources.push(source),source):void 0}function removeEventSource(source){sources=$.grep(sources,function(src){return!isSourcesEqual(src,source)}),cache=$.grep(cache,function(e){return!isSourcesEqual(e.source,source)}),reportEvents(cache)}function updateEvent(event){var i,e,len=cache.length,defaultEventEnd=getView().defaultEventEnd,startDelta=event.start-event._start,endDelta=event.end?event.end-(event._end||defaultEventEnd(event)):0;for(i=0;len>i;i++)e=cache[i],e._id==event._id&&e!=event&&(e.start=new Date(+e.start+startDelta),e.end=event.end?new Date(e.end?+e.end+endDelta:+defaultEventEnd(e)+endDelta):null,e.title=event.title,e.url=event.url,e.allDay=event.allDay,e.className=event.className,e.editable=event.editable,e.color=event.color,e.backgroundColor=event.backgroundColor,e.borderColor=event.borderColor,e.textColor=event.textColor,normalizeEvent(e));normalizeEvent(event),reportEvents(cache)}function renderEvent(event,stick){normalizeEvent(event),event.source||(stick&&(stickySource.events.push(event),event.source=stickySource),cache.push(event)),reportEvents(cache)}function removeEvents(filter){if(filter){if(!$.isFunction(filter)){var id=filter+"";filter=function(e){return e._id==id}}cache=$.grep(cache,filter,!0);for(var i=0;i<sources.length;i++)$.isArray(sources[i].events)&&(sources[i].events=$.grep(sources[i].events,filter,!0))}else{cache=[];for(var i=0;i<sources.length;i++)$.isArray(sources[i].events)&&(sources[i].events=[])}reportEvents(cache)}function clientEvents(filter){return $.isFunction(filter)?$.grep(cache,filter):filter?(filter+="",$.grep(cache,function(e){return e._id==filter})):cache}function pushLoading(){loadingLevel++||trigger("loading",null,!0,getView())}function popLoading(){--loadingLevel||trigger("loading",null,!1,getView())}function normalizeEvent(event){var source=event.source||{},ignoreTimezone=firstDefined(source.ignoreTimezone,options.ignoreTimezone);event._id=event._id||(event.id===undefined?"_fc"+eventGUID++:event.id+""),event.date&&(event.start||(event.start=event.date),delete event.date),event._start=cloneDate(event.start=parseDate(event.start,ignoreTimezone)),event.end=parseDate(event.end,ignoreTimezone),event.end&&event.end<=event.start&&(event.end=null),event._end=event.end?cloneDate(event.end):null,event.allDay===undefined&&(event.allDay=firstDefined(source.allDayDefault,options.allDayDefault)),event.className?"string"==typeof event.className&&(event.className=event.className.split(/\s+/)):event.className=[]}function normalizeSource(source){source.className?"string"==typeof source.className&&(source.className=source.className.split(/\s+/)):source.className=[];for(var normalizers=fc.sourceNormalizers,i=0;i<normalizers.length;i++)normalizers[i](source)}function isSourcesEqual(source1,source2){return source1&&source2&&getSourcePrimitive(source1)==getSourcePrimitive(source2)}function getSourcePrimitive(source){return("object"==typeof source?source.events||source.url:"")||source}var t=this;t.isFetchNeeded=isFetchNeeded,t.fetchEvents=fetchEvents,t.addEventSource=addEventSource,t.removeEventSource=removeEventSource,t.updateEvent=updateEvent,t.renderEvent=renderEvent,t.removeEvents=removeEvents,t.clientEvents=clientEvents,t.normalizeEvent=normalizeEvent;for(var rangeStart,rangeEnd,trigger=t.trigger,getView=t.getView,reportEvents=t.reportEvents,stickySource={events:[]},sources=[stickySource],currentFetchID=0,pendingSourceCnt=0,loadingLevel=0,cache=[],i=0;i<_sources.length;i++)_addEventSource(_sources[i])}function addYears(d,n,keepTime){return d.setFullYear(d.getFullYear()+n),keepTime||clearTime(d),d}function addMonths(d,n,keepTime){if(+d){var m=d.getMonth()+n,check=cloneDate(d);for(check.setDate(1),check.setMonth(m),d.setMonth(m),keepTime||clearTime(d);d.getMonth()!=check.getMonth();)d.setDate(d.getDate()+(check>d?1:-1))}return d}function addDays(d,n,keepTime){if(+d){var dd=d.getDate()+n,check=cloneDate(d);check.setHours(9),check.setDate(dd),d.setDate(dd),keepTime||clearTime(d),fixDate(d,check)}return d}function fixDate(d,check){if(+d)for(;d.getDate()!=check.getDate();)d.setTime(+d+(check>d?1:-1)*HOUR_MS)}function addMinutes(d,n){return d.setMinutes(d.getMinutes()+n),d}function clearTime(d){return d.setHours(0),d.setMinutes(0),d.setSeconds(0),d.setMilliseconds(0),d}function cloneDate(d,dontKeepTime){return dontKeepTime?clearTime(new Date(+d)):new Date(+d)}function zeroDate(){var d,i=0;do d=new Date(1970,i++,1);while(d.getHours());return d}function dayDiff(d1,d2){return Math.round((cloneDate(d1,!0)-cloneDate(d2,!0))/DAY_MS)}function setYMD(date,y,m,d){y!==undefined&&y!=date.getFullYear()&&(date.setDate(1),date.setMonth(0),date.setFullYear(y)),m!==undefined&&m!=date.getMonth()&&(date.setDate(1),date.setMonth(m)),d!==undefined&&date.setDate(d)}function parseDate(s,ignoreTimezone){return"object"==typeof s?s:"number"==typeof s?new Date(1e3*s):"string"==typeof s?s.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(s)):(ignoreTimezone===undefined&&(ignoreTimezone=!0),parseISO8601(s,ignoreTimezone)||(s?new Date(s):null)):null}function parseISO8601(s,ignoreTimezone){var m=s.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!m)return null;var date=new Date(m[1],0,1);if(ignoreTimezone||!m[13]){var check=new Date(m[1],0,1,9,0);m[3]&&(date.setMonth(m[3]-1),check.setMonth(m[3]-1)),m[5]&&(date.setDate(m[5]),check.setDate(m[5])),fixDate(date,check),m[7]&&date.setHours(m[7]),m[8]&&date.setMinutes(m[8]),m[10]&&date.setSeconds(m[10]),m[12]&&date.setMilliseconds(1e3*Number("0."+m[12])),fixDate(date,check)}else if(date.setUTCFullYear(m[1],m[3]?m[3]-1:0,m[5]||1),date.setUTCHours(m[7]||0,m[8]||0,m[10]||0,m[12]?1e3*Number("0."+m[12]):0),m[14]){var offset=60*Number(m[16])+(m[18]?Number(m[18]):0);offset*="-"==m[15]?1:-1,date=new Date(+date+60*offset*1e3)}return date}function parseTime(s){if("number"==typeof s)return 60*s;if("object"==typeof s)return 60*s.getHours()+s.getMinutes();var m=s.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(m){var h=parseInt(m[1],10);return m[3]&&(h%=12,"p"==m[3].toLowerCase().charAt(0)&&(h+=12)),60*h+(m[2]?parseInt(m[2],10):0)}}function formatDate(date,format,options){return formatDates(date,null,format,options)}function formatDates(date1,date2,format,options){options=options||defaults;var i,c,i2,formatter,date=date1,otherDate=date2,len=format.length,res="";for(i=0;len>i;i++)if(c=format.charAt(i),"'"==c){for(i2=i+1;len>i2;i2++)if("'"==format.charAt(i2)){date&&(res+=i2==i+1?"'":format.substring(i+1,i2),i=i2);break}}else if("("==c){for(i2=i+1;len>i2;i2++)if(")"==format.charAt(i2)){var subres=formatDate(date,format.substring(i+1,i2),options);parseInt(subres.replace(/\D/,""),10)&&(res+=subres),i=i2;break}}else if("["==c){for(i2=i+1;len>i2;i2++)if("]"==format.charAt(i2)){var subformat=format.substring(i+1,i2),subres=formatDate(date,subformat,options);subres!=formatDate(otherDate,subformat,options)&&(res+=subres),i=i2;break}}else if("{"==c)date=date2,otherDate=date1;else if("}"==c)date=date1,otherDate=date2;else{for(i2=len;i2>i;i2--)if(formatter=dateFormatters[format.substring(i,i2)]){date&&(res+=formatter(date,options)),i=i2-1;break}i2==i&&date&&(res+=c)}return res}function iso8601Week(date){var time,checkDate=new Date(date.getTime());return checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7)),time=checkDate.getTime(),checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1}function exclEndDay(event){return event.end?_exclEndDay(event.end,event.allDay):addDays(cloneDate(event.start),1)}function _exclEndDay(end,allDay){return end=cloneDate(end),allDay||end.getHours()||end.getMinutes()?addDays(end,1):clearTime(end)}function lazySegBind(container,segs,bindHandlers){container.unbind("mouseover").mouseover(function(ev){for(var e,i,seg,parent=ev.target;parent!=this;)e=parent,parent=parent.parentNode;(i=e._fci)!==undefined&&(e._fci=undefined,seg=segs[i],bindHandlers(seg.event,seg.element,seg),$(ev.target).trigger(ev)),ev.stopPropagation()})}function setOuterWidth(element,width,includeMargins){for(var e,i=0;i<element.length;i++)e=$(element[i]),e.width(Math.max(0,width-hsides(e,includeMargins)))}function setOuterHeight(element,height,includeMargins){for(var e,i=0;i<element.length;i++)e=$(element[i]),e.height(Math.max(0,height-vsides(e,includeMargins)))}function hsides(element,includeMargins){return hpadding(element)+hborders(element)+(includeMargins?hmargins(element):0)}function hpadding(element){return(parseFloat($.css(element[0],"paddingLeft",!0))||0)+(parseFloat($.css(element[0],"paddingRight",!0))||0)}function hmargins(element){return(parseFloat($.css(element[0],"marginLeft",!0))||0)+(parseFloat($.css(element[0],"marginRight",!0))||0)}function hborders(element){return(parseFloat($.css(element[0],"borderLeftWidth",!0))||0)+(parseFloat($.css(element[0],"borderRightWidth",!0))||0)}function vsides(element,includeMargins){return vpadding(element)+vborders(element)+(includeMargins?vmargins(element):0)}function vpadding(element){return(parseFloat($.css(element[0],"paddingTop",!0))||0)+(parseFloat($.css(element[0],"paddingBottom",!0))||0)}function vmargins(element){return(parseFloat($.css(element[0],"marginTop",!0))||0)+(parseFloat($.css(element[0],"marginBottom",!0))||0)}function vborders(element){return(parseFloat($.css(element[0],"borderTopWidth",!0))||0)+(parseFloat($.css(element[0],"borderBottomWidth",!0))||0)}function noop(){}function dateCompare(a,b){return a-b}function arrayMax(a){return Math.max.apply(Math,a)}function zeroPad(n){return(10>n?"0":"")+n}function smartProperty(obj,name){if(obj[name]!==undefined)return obj[name];for(var res,parts=name.split(/(?=[A-Z])/),i=parts.length-1;i>=0;i--)if(res=obj[parts[i].toLowerCase()],res!==undefined)return res;return obj[""]}function htmlEscape(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function disableTextSelection(element){element.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function markFirstLast(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function getSkinCss(event,opt){var source=event.source||{},eventColor=event.color,sourceColor=source.color,optionColor=opt("eventColor"),backgroundColor=event.backgroundColor||eventColor||source.backgroundColor||sourceColor||opt("eventBackgroundColor")||optionColor,borderColor=event.borderColor||eventColor||source.borderColor||sourceColor||opt("eventBorderColor")||optionColor,textColor=event.textColor||source.textColor||opt("eventTextColor"),statements=[];return backgroundColor&&statements.push("background-color:"+backgroundColor),borderColor&&statements.push("border-color:"+borderColor),textColor&&statements.push("color:"+textColor),statements.join(";")}function applyAll(functions,thisObj,args){if($.isFunction(functions)&&(functions=[functions]),functions){var i,ret;for(i=0;i<functions.length;i++)ret=functions[i].apply(thisObj,args)||ret;return ret}}function firstDefined(){for(var i=0;i<arguments.length;i++)if(arguments[i]!==undefined)return arguments[i]}function MonthView(element,calendar){function render(date,delta){delta&&(addMonths(date,delta),date.setDate(1));var firstDay=opt("firstDay"),start=cloneDate(date,!0);start.setDate(1);var end=addMonths(cloneDate(start),1),visStart=cloneDate(start);addDays(visStart,-((visStart.getDay()-firstDay+7)%7)),skipHiddenDays(visStart);var visEnd=cloneDate(end);addDays(visEnd,(7-visEnd.getDay()+firstDay)%7),skipHiddenDays(visEnd,-1,!0);var colCnt=getCellsPerWeek(),rowCnt=Math.round(dayDiff(visEnd,visStart)/7);"fixed"==opt("weekMode")&&(addDays(visEnd,7*(6-rowCnt)),rowCnt=6),t.title=formatDate(start,opt("titleFormat")),t.start=start,t.end=end,t.visStart=visStart,t.visEnd=visEnd,renderBasic(rowCnt,colCnt,!0)}var t=this;t.render=render,BasicView.call(t,element,calendar,"month");var opt=t.opt,renderBasic=t.renderBasic,skipHiddenDays=t.skipHiddenDays,getCellsPerWeek=t.getCellsPerWeek,formatDate=calendar.formatDate}function BasicWeekView(element,calendar){function render(date,delta){delta&&addDays(date,7*delta);var start=addDays(cloneDate(date),-((date.getDay()-opt("firstDay")+7)%7)),end=addDays(cloneDate(start),7),visStart=cloneDate(start);skipHiddenDays(visStart);var visEnd=cloneDate(end);skipHiddenDays(visEnd,-1,!0);var colCnt=getCellsPerWeek();t.start=start,t.end=end,t.visStart=visStart,t.visEnd=visEnd,t.title=formatDates(visStart,addDays(cloneDate(visEnd),-1),opt("titleFormat")),renderBasic(1,colCnt,!1)}var t=this;t.render=render,BasicView.call(t,element,calendar,"basicWeek");var opt=t.opt,renderBasic=t.renderBasic,skipHiddenDays=t.skipHiddenDays,getCellsPerWeek=t.getCellsPerWeek,formatDates=calendar.formatDates}function BasicDayView(element,calendar){function render(date,delta){delta&&addDays(date,delta),skipHiddenDays(date,0>delta?-1:1);var start=cloneDate(date,!0),end=addDays(cloneDate(start),1);t.title=formatDate(date,opt("titleFormat")),t.start=t.visStart=start,t.end=t.visEnd=end,renderBasic(1,1,!1)}var t=this;t.render=render,BasicView.call(t,element,calendar,"basicDay");var opt=t.opt,renderBasic=t.renderBasic,skipHiddenDays=t.skipHiddenDays,formatDate=calendar.formatDate}function BasicView(element,calendar,viewName){function renderBasic(_rowCnt,_colCnt,_showNumbers){rowCnt=_rowCnt,colCnt=_colCnt,showNumbers=_showNumbers,updateOptions(),body||buildEventContainer(),buildTable()}function updateOptions(){tm=opt("theme")?"ui":"fc",colFormat=opt("columnFormat"),showWeekNumbers=opt("weekNumbers"),weekNumberTitle=opt("weekNumberTitle"),weekNumberFormat="iso"!=opt("weekNumberCalculation")?"w":"W"}function buildEventContainer(){daySegmentContainer=$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(element)}function buildTable(){var html=buildTableHTML();table&&table.remove(),table=$(html).appendTo(element),head=table.find("thead"),headCells=head.find(".fc-day-header"),body=table.find("tbody"),bodyRows=body.find("tr"),bodyCells=body.find(".fc-day"),bodyFirstCells=bodyRows.find("td:first-child"),firstRowCellInners=bodyRows.eq(0).find(".fc-day > div"),firstRowCellContentInners=bodyRows.eq(0).find(".fc-day-content > div"),markFirstLast(head.add(head.find("tr"))),markFirstLast(bodyRows),bodyRows.eq(0).addClass("fc-first"),bodyRows.filter(":last").addClass("fc-last"),bodyCells.each(function(i,_cell){var date=cellToDate(Math.floor(i/colCnt),i%colCnt);trigger("dayRender",t,date,$(_cell))}),dayBind(bodyCells)}function buildTableHTML(){var html="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+buildHeadHTML()+buildBodyHTML()+"</table>";return html}function buildHeadHTML(){var col,date,headerClass=tm+"-widget-header",html="";for(html+="<thead><tr>",showWeekNumbers&&(html+="<th class='fc-week-number "+headerClass+"'>"+htmlEscape(weekNumberTitle)+"</th>"),col=0;colCnt>col;col++)date=cellToDate(0,col),html+="<th class='fc-day-header fc-"+dayIDs[date.getDay()]+" "+headerClass+"'>"+htmlEscape(formatDate(date,colFormat))+"</th>";return html+="</tr></thead>"}function buildBodyHTML(){var row,col,date,contentClass=tm+"-widget-content",html="";for(html+="<tbody>",row=0;rowCnt>row;row++){for(html+="<tr class='fc-week'>",showWeekNumbers&&(date=cellToDate(row,0),html+="<td class='fc-week-number "+contentClass+"'><div>"+htmlEscape(formatDate(date,weekNumberFormat))+"</div></td>"),col=0;colCnt>col;col++)date=cellToDate(row,col),html+=buildCellHTML(date);html+="</tr>"}return html+="</tbody>"}function buildCellHTML(date){var contentClass=tm+"-widget-content",month=t.start.getMonth(),today=clearTime(new Date),html="",classNames=["fc-day","fc-"+dayIDs[date.getDay()],contentClass];return date.getMonth()!=month&&classNames.push("fc-other-month"),+date==+today?classNames.push("fc-today",tm+"-state-highlight"):classNames.push(today>date?"fc-past":"fc-future"),html+="<td class='"+classNames.join(" ")+"' data-date='"+formatDate(date,"yyyy-MM-dd")+"'><div>",showNumbers&&(html+="<div class='fc-day-number'>"+date.getDate()+"</div>"),html+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function setHeight(height){viewHeight=height;var rowHeight,rowHeightLast,cell,bodyHeight=viewHeight-head.height();"variable"==opt("weekMode")?rowHeight=rowHeightLast=Math.floor(bodyHeight/(1==rowCnt?2:6)):(rowHeight=Math.floor(bodyHeight/rowCnt),rowHeightLast=bodyHeight-rowHeight*(rowCnt-1)),bodyFirstCells.each(function(i,_cell){rowCnt>i&&(cell=$(_cell),cell.find("> div").css("min-height",(i==rowCnt-1?rowHeightLast:rowHeight)-vsides(cell)))})}function setWidth(width){viewWidth=width,colPositions.clear(),colContentPositions.clear(),weekNumberWidth=0,showWeekNumbers&&(weekNumberWidth=head.find("th.fc-week-number").outerWidth()),colWidth=Math.floor((viewWidth-weekNumberWidth)/colCnt),setOuterWidth(headCells.slice(0,-1),colWidth)}function dayBind(days){days.click(dayClick).mousedown(daySelectionMousedown)}function dayClick(ev){if(!opt("selectable")){var date=parseISO8601($(this).data("date"));trigger("dayClick",this,date,!0,ev)}}function renderDayOverlay(overlayStart,overlayEnd,refreshCoordinateGrid){refreshCoordinateGrid&&coordinateGrid.build();for(var segments=rangeToSegments(overlayStart,overlayEnd),i=0;i<segments.length;i++){var segment=segments[i];dayBind(renderCellOverlay(segment.row,segment.leftCol,segment.row,segment.rightCol))}}function renderCellOverlay(row0,col0,row1,col1){var rect=coordinateGrid.rect(row0,col0,row1,col1,element);return renderOverlay(rect,element)}function defaultSelectionEnd(startDate){return cloneDate(startDate)}function renderSelection(startDate,endDate){renderDayOverlay(startDate,addDays(cloneDate(endDate),1),!0)}function clearSelection(){clearOverlays()}function reportDayClick(date,allDay,ev){var cell=dateToCell(date),_element=bodyCells[cell.row*colCnt+cell.col];trigger("dayClick",_element,date,allDay,ev)}function dragStart(_dragElement,ev){hoverListener.start(function(cell){clearOverlays(),cell&&renderCellOverlay(cell.row,cell.col,cell.row,cell.col)},ev)}function dragStop(_dragElement,ev,ui){var cell=hoverListener.stop();if(clearOverlays(),cell){var d=cellToDate(cell);trigger("drop",_dragElement,d,!0,ev,ui)}}function defaultEventEnd(event){return cloneDate(event.start)}function colLeft(col){return colPositions.left(col)}function colRight(col){return colPositions.right(col)}function colContentLeft(col){return colContentPositions.left(col)}function colContentRight(col){return colContentPositions.right(col)}function allDayRow(i){return bodyRows.eq(i)}var t=this;t.renderBasic=renderBasic,t.setHeight=setHeight,t.setWidth=setWidth,t.renderDayOverlay=renderDayOverlay,t.defaultSelectionEnd=defaultSelectionEnd,t.renderSelection=renderSelection,t.clearSelection=clearSelection,t.reportDayClick=reportDayClick,t.dragStart=dragStart,t.dragStop=dragStop,t.defaultEventEnd=defaultEventEnd,t.getHoverListener=function(){return hoverListener},t.colLeft=colLeft,t.colRight=colRight,t.colContentLeft=colContentLeft,t.colContentRight=colContentRight,t.getIsCellAllDay=function(){return!0},t.allDayRow=allDayRow,t.getRowCnt=function(){return rowCnt},t.getColCnt=function(){return colCnt},t.getColWidth=function(){return colWidth},t.getDaySegmentContainer=function(){return daySegmentContainer},View.call(t,element,calendar,viewName),OverlayManager.call(t),SelectionManager.call(t),BasicEventRenderer.call(t);var table,head,headCells,body,bodyRows,bodyCells,bodyFirstCells,firstRowCellInners,firstRowCellContentInners,daySegmentContainer,viewWidth,viewHeight,colWidth,weekNumberWidth,rowCnt,colCnt,showNumbers,coordinateGrid,hoverListener,colPositions,colContentPositions,tm,colFormat,showWeekNumbers,weekNumberTitle,weekNumberFormat,opt=t.opt,trigger=t.trigger,renderOverlay=t.renderOverlay,clearOverlays=t.clearOverlays,daySelectionMousedown=t.daySelectionMousedown,cellToDate=t.cellToDate,dateToCell=t.dateToCell,rangeToSegments=t.rangeToSegments,formatDate=calendar.formatDate;disableTextSelection(element.addClass("fc-grid")),coordinateGrid=new CoordinateGrid(function(rows,cols){var e,n,p;
headCells.each(function(i,_e){e=$(_e),n=e.offset().left,i&&(p[1]=n),p=[n],cols[i]=p}),p[1]=n+e.outerWidth(),bodyRows.each(function(i,_e){rowCnt>i&&(e=$(_e),n=e.offset().top,i&&(p[1]=n),p=[n],rows[i]=p)}),p[1]=n+e.outerHeight()}),hoverListener=new HoverListener(coordinateGrid),colPositions=new HorizontalPositionCache(function(col){return firstRowCellInners.eq(col)}),colContentPositions=new HorizontalPositionCache(function(col){return firstRowCellContentInners.eq(col)})}function BasicEventRenderer(){function renderEvents(events,modifiedEventId){t.renderDayEvents(events,modifiedEventId)}function clearEvents(){t.getDaySegmentContainer().empty()}var t=this;t.renderEvents=renderEvents,t.clearEvents=clearEvents,DayEventRenderer.call(t)}function AgendaWeekView(element,calendar){function render(date,delta){delta&&addDays(date,7*delta);var start=addDays(cloneDate(date),-((date.getDay()-opt("firstDay")+7)%7)),end=addDays(cloneDate(start),7),visStart=cloneDate(start);skipHiddenDays(visStart);var visEnd=cloneDate(end);skipHiddenDays(visEnd,-1,!0);var colCnt=getCellsPerWeek();t.title=formatDates(visStart,addDays(cloneDate(visEnd),-1),opt("titleFormat")),t.start=start,t.end=end,t.visStart=visStart,t.visEnd=visEnd,renderAgenda(colCnt)}var t=this;t.render=render,AgendaView.call(t,element,calendar,"agendaWeek");var opt=t.opt,renderAgenda=t.renderAgenda,skipHiddenDays=t.skipHiddenDays,getCellsPerWeek=t.getCellsPerWeek,formatDates=calendar.formatDates}function AgendaDayView(element,calendar){function render(date,delta){delta&&addDays(date,delta),skipHiddenDays(date,0>delta?-1:1);var start=cloneDate(date,!0),end=addDays(cloneDate(start),1);t.title=formatDate(date,opt("titleFormat")),t.start=t.visStart=start,t.end=t.visEnd=end,renderAgenda(1)}var t=this;t.render=render,AgendaView.call(t,element,calendar,"agendaDay");var opt=t.opt,renderAgenda=t.renderAgenda,skipHiddenDays=t.skipHiddenDays,formatDate=calendar.formatDate}function AgendaView(element,calendar,viewName){function renderAgenda(c){colCnt=c,updateOptions(),dayTable?buildDayTable():buildSkeleton()}function updateOptions(){tm=opt("theme")?"ui":"fc",rtl=opt("isRTL"),minMinute=parseTime(opt("minTime")),maxMinute=parseTime(opt("maxTime")),colFormat=opt("columnFormat"),showWeekNumbers=opt("weekNumbers"),weekNumberTitle=opt("weekNumberTitle"),weekNumberFormat="iso"!=opt("weekNumberCalculation")?"w":"W",snapMinutes=opt("snapMinutes")||opt("slotMinutes")}function buildSkeleton(){var s,d,i,maxd,minutes,headerClass=tm+"-widget-header",contentClass=tm+"-widget-content",slotNormal=opt("slotMinutes")%15==0;for(buildDayTable(),slotLayer=$("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(element),opt("allDaySlot")?(daySegmentContainer=$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(slotLayer),s="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+headerClass+" fc-agenda-axis'>"+opt("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+headerClass+" fc-agenda-gutter'>&nbsp;</th></tr></table>",allDayTable=$(s).appendTo(slotLayer),allDayRow=allDayTable.find("tr"),dayBind(allDayRow.find("td")),slotLayer.append("<div class='fc-agenda-divider "+headerClass+"'><div class='fc-agenda-divider-inner'/></div>")):daySegmentContainer=$([]),slotScroller=$("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(slotLayer),slotContainer=$("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(slotScroller),slotSegmentContainer=$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(slotContainer),s="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",d=zeroDate(),maxd=addMinutes(cloneDate(d),maxMinute),addMinutes(d,minMinute),slotCnt=0,i=0;maxd>d;i++)minutes=d.getMinutes(),s+="<tr class='fc-slot"+i+" "+(minutes?"fc-minor":"")+"'><th class='fc-agenda-axis "+headerClass+"'>"+(slotNormal&&minutes?"&nbsp;":formatDate(d,opt("axisFormat")))+"</th><td class='"+contentClass+"'><div style='position:relative'>&nbsp;</div></td></tr>",addMinutes(d,opt("slotMinutes")),slotCnt++;s+="</tbody></table>",slotTable=$(s).appendTo(slotContainer),slotBind(slotTable.find("td"))}function buildDayTable(){var html=buildDayTableHTML();dayTable&&dayTable.remove(),dayTable=$(html).appendTo(element),dayHead=dayTable.find("thead"),dayHeadCells=dayHead.find("th").slice(1,-1),dayBody=dayTable.find("tbody"),dayBodyCells=dayBody.find("td").slice(0,-1),dayBodyCellInners=dayBodyCells.find("> div"),dayBodyCellContentInners=dayBodyCells.find(".fc-day-content > div"),dayBodyFirstCell=dayBodyCells.eq(0),dayBodyFirstCellStretcher=dayBodyCellInners.eq(0),markFirstLast(dayHead.add(dayHead.find("tr"))),markFirstLast(dayBody.add(dayBody.find("tr")))}function buildDayTableHTML(){var html="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+buildDayTableHeadHTML()+buildDayTableBodyHTML()+"</table>";return html}function buildDayTableHeadHTML(){var date,weekText,col,headerClass=tm+"-widget-header",html="";for(html+="<thead><tr>",showWeekNumbers?(date=cellToDate(0,0),weekText=formatDate(date,weekNumberFormat),rtl?weekText+=weekNumberTitle:weekText=weekNumberTitle+weekText,html+="<th class='fc-agenda-axis fc-week-number "+headerClass+"'>"+htmlEscape(weekText)+"</th>"):html+="<th class='fc-agenda-axis "+headerClass+"'>&nbsp;</th>",col=0;colCnt>col;col++)date=cellToDate(0,col),html+="<th class='fc-"+dayIDs[date.getDay()]+" fc-col"+col+" "+headerClass+"'>"+htmlEscape(formatDate(date,colFormat))+"</th>";return html+="<th class='fc-agenda-gutter "+headerClass+"'>&nbsp;</th></tr></thead>"}function buildDayTableBodyHTML(){var date,col,cellsHTML,cellHTML,classNames,headerClass=tm+"-widget-header",contentClass=tm+"-widget-content",today=clearTime(new Date),html="";for(html+="<tbody><tr><th class='fc-agenda-axis "+headerClass+"'>&nbsp;</th>",cellsHTML="",col=0;colCnt>col;col++)date=cellToDate(0,col),classNames=["fc-col"+col,"fc-"+dayIDs[date.getDay()],contentClass],+date==+today?classNames.push(tm+"-state-highlight","fc-today"):classNames.push(today>date?"fc-past":"fc-future"),cellHTML="<td class='"+classNames.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",cellsHTML+=cellHTML;return html+=cellsHTML,html+="<td class='fc-agenda-gutter "+contentClass+"'>&nbsp;</td></tr></tbody>"}function setHeight(height){height===undefined&&(height=viewHeight),viewHeight=height,slotTopCache={};var headHeight=dayBody.position().top,allDayHeight=slotScroller.position().top,bodyHeight=Math.min(height-headHeight,slotTable.height()+allDayHeight+1);dayBodyFirstCellStretcher.height(bodyHeight-vsides(dayBodyFirstCell)),slotLayer.css("top",headHeight),slotScroller.height(bodyHeight-allDayHeight-1),slotHeight=slotTable.find("tr:first").height()+1,snapRatio=opt("slotMinutes")/snapMinutes,snapHeight=slotHeight/snapRatio}function setWidth(width){viewWidth=width,colPositions.clear(),colContentPositions.clear();var axisFirstCells=dayHead.find("th:first");allDayTable&&(axisFirstCells=axisFirstCells.add(allDayTable.find("th:first"))),axisFirstCells=axisFirstCells.add(slotTable.find("th:first")),axisWidth=0,setOuterWidth(axisFirstCells.width("").each(function(i,_cell){axisWidth=Math.max(axisWidth,$(_cell).outerWidth())}),axisWidth);var gutterCells=dayTable.find(".fc-agenda-gutter");allDayTable&&(gutterCells=gutterCells.add(allDayTable.find("th.fc-agenda-gutter")));var slotTableWidth=slotScroller[0].clientWidth;gutterWidth=slotScroller.width()-slotTableWidth,gutterWidth?(setOuterWidth(gutterCells,gutterWidth),gutterCells.show().prev().removeClass("fc-last")):gutterCells.hide().prev().addClass("fc-last"),colWidth=Math.floor((slotTableWidth-axisWidth)/colCnt),setOuterWidth(dayHeadCells.slice(0,-1),colWidth)}function resetScroll(){function scroll(){slotScroller.scrollTop(top)}var d0=zeroDate(),scrollDate=cloneDate(d0);scrollDate.setHours(opt("firstHour"));var top=timePosition(d0,scrollDate)+1;scroll(),setTimeout(scroll,0)}function afterRender(){resetScroll()}function dayBind(cells){cells.click(slotClick).mousedown(daySelectionMousedown)}function slotBind(cells){cells.click(slotClick).mousedown(slotSelectionMousedown)}function slotClick(ev){if(!opt("selectable")){var col=Math.min(colCnt-1,Math.floor((ev.pageX-dayTable.offset().left-axisWidth)/colWidth)),date=cellToDate(0,col),rowMatch=this.parentNode.className.match(/fc-slot(\d+)/);if(rowMatch){var mins=parseInt(rowMatch[1])*opt("slotMinutes"),hours=Math.floor(mins/60);date.setHours(hours),date.setMinutes(mins%60+minMinute),trigger("dayClick",dayBodyCells[col],date,!1,ev)}else trigger("dayClick",dayBodyCells[col],date,!0,ev)}}function renderDayOverlay(overlayStart,overlayEnd,refreshCoordinateGrid){refreshCoordinateGrid&&coordinateGrid.build();for(var segments=rangeToSegments(overlayStart,overlayEnd),i=0;i<segments.length;i++){var segment=segments[i];dayBind(renderCellOverlay(segment.row,segment.leftCol,segment.row,segment.rightCol))}}function renderCellOverlay(row0,col0,row1,col1){var rect=coordinateGrid.rect(row0,col0,row1,col1,slotLayer);return renderOverlay(rect,slotLayer)}function renderSlotOverlay(overlayStart,overlayEnd){for(var i=0;colCnt>i;i++){var dayStart=cellToDate(0,i),dayEnd=addDays(cloneDate(dayStart),1),stretchStart=new Date(Math.max(dayStart,overlayStart)),stretchEnd=new Date(Math.min(dayEnd,overlayEnd));if(stretchEnd>stretchStart){var rect=coordinateGrid.rect(0,i,0,i,slotContainer),top=timePosition(dayStart,stretchStart),bottom=timePosition(dayStart,stretchEnd);rect.top=top,rect.height=bottom-top,slotBind(renderOverlay(rect,slotContainer))}}}function colLeft(col){return colPositions.left(col)}function colContentLeft(col){return colContentPositions.left(col)}function colRight(col){return colPositions.right(col)}function colContentRight(col){return colContentPositions.right(col)}function getIsCellAllDay(cell){return opt("allDaySlot")&&!cell.row}function realCellToDate(cell){var d=cellToDate(0,cell.col),slotIndex=cell.row;return opt("allDaySlot")&&slotIndex--,slotIndex>=0&&addMinutes(d,minMinute+slotIndex*snapMinutes),d}function timePosition(day,time){if(day=cloneDate(day,!0),time<addMinutes(cloneDate(day),minMinute))return 0;if(time>=addMinutes(cloneDate(day),maxMinute))return slotTable.height();var slotMinutes=opt("slotMinutes"),minutes=60*time.getHours()+time.getMinutes()-minMinute,slotI=Math.floor(minutes/slotMinutes),slotTop=slotTopCache[slotI];return slotTop===undefined&&(slotTop=slotTopCache[slotI]=slotTable.find("tr").eq(slotI).find("td div")[0].offsetTop),Math.max(0,Math.round(slotTop-1+slotHeight*(minutes%slotMinutes/slotMinutes)))}function getAllDayRow(){return allDayRow}function defaultEventEnd(event){var start=cloneDate(event.start);return event.allDay?start:addMinutes(start,opt("defaultEventMinutes"))}function defaultSelectionEnd(startDate,allDay){return allDay?cloneDate(startDate):addMinutes(cloneDate(startDate),opt("slotMinutes"))}function renderSelection(startDate,endDate,allDay){allDay?opt("allDaySlot")&&renderDayOverlay(startDate,addDays(cloneDate(endDate),1),!0):renderSlotSelection(startDate,endDate)}function renderSlotSelection(startDate,endDate){var helperOption=opt("selectHelper");if(coordinateGrid.build(),helperOption){var col=dateToCell(startDate).col;if(col>=0&&colCnt>col){var rect=coordinateGrid.rect(0,col,0,col,slotContainer),top=timePosition(startDate,startDate),bottom=timePosition(startDate,endDate);if(bottom>top){if(rect.top=top,rect.height=bottom-top,rect.left+=2,rect.width-=5,$.isFunction(helperOption)){var helperRes=helperOption(startDate,endDate);helperRes&&(rect.position="absolute",selectionHelper=$(helperRes).css(rect).appendTo(slotContainer))}else rect.isStart=!0,rect.isEnd=!0,selectionHelper=$(slotSegHtml({title:"",start:startDate,end:endDate,className:["fc-select-helper"],editable:!1},rect)),selectionHelper.css("opacity",opt("dragOpacity"));selectionHelper&&(slotBind(selectionHelper),slotContainer.append(selectionHelper),setOuterWidth(selectionHelper,rect.width,!0),setOuterHeight(selectionHelper,rect.height,!0))}}}else renderSlotOverlay(startDate,endDate)}function clearSelection(){clearOverlays(),selectionHelper&&(selectionHelper.remove(),selectionHelper=null)}function slotSelectionMousedown(ev){if(1==ev.which&&opt("selectable")){unselect(ev);var dates;hoverListener.start(function(cell,origCell){if(clearSelection(),cell&&cell.col==origCell.col&&!getIsCellAllDay(cell)){var d1=realCellToDate(origCell),d2=realCellToDate(cell);dates=[d1,addMinutes(cloneDate(d1),snapMinutes),d2,addMinutes(cloneDate(d2),snapMinutes)].sort(dateCompare),renderSlotSelection(dates[0],dates[3])}else dates=null},ev),$(document).one("mouseup",function(ev){hoverListener.stop(),dates&&(+dates[0]==+dates[1]&&reportDayClick(dates[0],!1,ev),reportSelection(dates[0],dates[3],!1,ev))})}}function reportDayClick(date,allDay,ev){trigger("dayClick",dayBodyCells[dateToCell(date).col],date,allDay,ev)}function dragStart(_dragElement,ev){hoverListener.start(function(cell){if(clearOverlays(),cell)if(getIsCellAllDay(cell))renderCellOverlay(cell.row,cell.col,cell.row,cell.col);else{var d1=realCellToDate(cell),d2=addMinutes(cloneDate(d1),opt("defaultEventMinutes"));renderSlotOverlay(d1,d2)}},ev)}function dragStop(_dragElement,ev,ui){var cell=hoverListener.stop();clearOverlays(),cell&&trigger("drop",_dragElement,realCellToDate(cell),getIsCellAllDay(cell),ev,ui)}var t=this;t.renderAgenda=renderAgenda,t.setWidth=setWidth,t.setHeight=setHeight,t.afterRender=afterRender,t.defaultEventEnd=defaultEventEnd,t.timePosition=timePosition,t.getIsCellAllDay=getIsCellAllDay,t.allDayRow=getAllDayRow,t.getCoordinateGrid=function(){return coordinateGrid},t.getHoverListener=function(){return hoverListener},t.colLeft=colLeft,t.colRight=colRight,t.colContentLeft=colContentLeft,t.colContentRight=colContentRight,t.getDaySegmentContainer=function(){return daySegmentContainer},t.getSlotSegmentContainer=function(){return slotSegmentContainer},t.getMinMinute=function(){return minMinute},t.getMaxMinute=function(){return maxMinute},t.getSlotContainer=function(){return slotContainer},t.getRowCnt=function(){return 1},t.getColCnt=function(){return colCnt},t.getColWidth=function(){return colWidth},t.getSnapHeight=function(){return snapHeight},t.getSnapMinutes=function(){return snapMinutes},t.defaultSelectionEnd=defaultSelectionEnd,t.renderDayOverlay=renderDayOverlay,t.renderSelection=renderSelection,t.clearSelection=clearSelection,t.reportDayClick=reportDayClick,t.dragStart=dragStart,t.dragStop=dragStop,View.call(t,element,calendar,viewName),OverlayManager.call(t),SelectionManager.call(t),AgendaEventRenderer.call(t);var dayTable,dayHead,dayHeadCells,dayBody,dayBodyCells,dayBodyCellInners,dayBodyCellContentInners,dayBodyFirstCell,dayBodyFirstCellStretcher,slotLayer,daySegmentContainer,allDayTable,allDayRow,slotScroller,slotContainer,slotSegmentContainer,slotTable,selectionHelper,viewWidth,viewHeight,axisWidth,colWidth,gutterWidth,slotHeight,snapMinutes,snapRatio,snapHeight,colCnt,slotCnt,coordinateGrid,hoverListener,colPositions,colContentPositions,tm,rtl,minMinute,maxMinute,colFormat,showWeekNumbers,weekNumberTitle,weekNumberFormat,opt=t.opt,trigger=t.trigger,renderOverlay=t.renderOverlay,clearOverlays=t.clearOverlays,reportSelection=t.reportSelection,unselect=t.unselect,daySelectionMousedown=t.daySelectionMousedown,slotSegHtml=t.slotSegHtml,cellToDate=t.cellToDate,dateToCell=t.dateToCell,rangeToSegments=t.rangeToSegments,formatDate=calendar.formatDate,slotTopCache={};disableTextSelection(element.addClass("fc-agenda")),coordinateGrid=new CoordinateGrid(function(rows,cols){function constrain(n){return Math.max(slotScrollerTop,Math.min(slotScrollerBottom,n))}var e,n,p;dayHeadCells.each(function(i,_e){e=$(_e),n=e.offset().left,i&&(p[1]=n),p=[n],cols[i]=p}),p[1]=n+e.outerWidth(),opt("allDaySlot")&&(e=allDayRow,n=e.offset().top,rows[0]=[n,n+e.outerHeight()]);for(var slotTableTop=slotContainer.offset().top,slotScrollerTop=slotScroller.offset().top,slotScrollerBottom=slotScrollerTop+slotScroller.outerHeight(),i=0;slotCnt*snapRatio>i;i++)rows.push([constrain(slotTableTop+snapHeight*i),constrain(slotTableTop+snapHeight*(i+1))])}),hoverListener=new HoverListener(coordinateGrid),colPositions=new HorizontalPositionCache(function(col){return dayBodyCellInners.eq(col)}),colContentPositions=new HorizontalPositionCache(function(col){return dayBodyCellContentInners.eq(col)})}function AgendaEventRenderer(){function renderEvents(events,modifiedEventId){var i,len=events.length,dayEvents=[],slotEvents=[];for(i=0;len>i;i++)events[i].allDay?dayEvents.push(events[i]):slotEvents.push(events[i]);opt("allDaySlot")&&(renderDayEvents(dayEvents,modifiedEventId),setHeight()),renderSlotSegs(compileSlotSegs(slotEvents),modifiedEventId)}function clearEvents(){getDaySegmentContainer().empty(),getSlotSegmentContainer().empty()}function compileSlotSegs(events){var d,i,j,seg,colSegs,colCnt=getColCnt(),minMinute=getMinMinute(),maxMinute=getMaxMinute(),visEventEnds=$.map(events,slotEventEnd),segs=[];for(i=0;colCnt>i;i++)for(d=cellToDate(0,i),addMinutes(d,minMinute),colSegs=sliceSegs(events,visEventEnds,d,addMinutes(cloneDate(d),maxMinute-minMinute)),colSegs=placeSlotSegs(colSegs),j=0;j<colSegs.length;j++)seg=colSegs[j],seg.col=i,segs.push(seg);return segs}function sliceSegs(events,visEventEnds,start,end){var i,event,eventStart,eventEnd,segStart,segEnd,isStart,isEnd,segs=[],len=events.length;for(i=0;len>i;i++)event=events[i],eventStart=event.start,eventEnd=visEventEnds[i],eventEnd>start&&end>eventStart&&(start>eventStart?(segStart=cloneDate(start),isStart=!1):(segStart=eventStart,isStart=!0),eventEnd>end?(segEnd=cloneDate(end),isEnd=!1):(segEnd=eventEnd,isEnd=!0),segs.push({event:event,start:segStart,end:segEnd,isStart:isStart,isEnd:isEnd}));return segs.sort(compareSlotSegs)}function slotEventEnd(event){return event.end?cloneDate(event.end):addMinutes(cloneDate(event.start),opt("defaultEventMinutes"))}function renderSlotSegs(segs,modifiedEventId){var i,seg,event,top,bottom,columnLeft,columnRight,columnWidth,width,left,right,eventElements,eventElement,triggerRes,titleElement,height,segCnt=segs.length,html="",slotSegmentContainer=getSlotSegmentContainer(),isRTL=opt("isRTL");for(i=0;segCnt>i;i++)seg=segs[i],event=seg.event,top=timePosition(seg.start,seg.start),bottom=timePosition(seg.start,seg.end),columnLeft=colContentLeft(seg.col),columnRight=colContentRight(seg.col),columnWidth=columnRight-columnLeft,columnRight-=.025*columnWidth,columnWidth=columnRight-columnLeft,width=columnWidth*(seg.forwardCoord-seg.backwardCoord),opt("slotEventOverlap")&&(width=Math.max(2*(width-10),width)),isRTL?(right=columnRight-seg.backwardCoord*columnWidth,left=right-width):(left=columnLeft+seg.backwardCoord*columnWidth,right=left+width),left=Math.max(left,columnLeft),right=Math.min(right,columnRight),width=right-left,seg.top=top,seg.left=left,seg.outerWidth=width,seg.outerHeight=bottom-top,html+=slotSegHtml(event,seg);for(slotSegmentContainer[0].innerHTML=html,eventElements=slotSegmentContainer.children(),i=0;segCnt>i;i++)seg=segs[i],event=seg.event,eventElement=$(eventElements[i]),triggerRes=trigger("eventRender",event,event,eventElement),triggerRes===!1?eventElement.remove():(triggerRes&&triggerRes!==!0&&(eventElement.remove(),eventElement=$(triggerRes).css({position:"absolute",top:seg.top,left:seg.left}).appendTo(slotSegmentContainer)),seg.element=eventElement,event._id===modifiedEventId?bindSlotSeg(event,eventElement,seg):eventElement[0]._fci=i,reportEventElement(event,eventElement));for(lazySegBind(slotSegmentContainer,segs,bindSlotSeg),i=0;segCnt>i;i++)seg=segs[i],(eventElement=seg.element)&&(seg.vsides=vsides(eventElement,!0),seg.hsides=hsides(eventElement,!0),titleElement=eventElement.find(".fc-event-title"),titleElement.length&&(seg.contentTop=titleElement[0].offsetTop));for(i=0;segCnt>i;i++)seg=segs[i],(eventElement=seg.element)&&(eventElement[0].style.width=Math.max(0,seg.outerWidth-seg.hsides)+"px",height=Math.max(0,seg.outerHeight-seg.vsides),eventElement[0].style.height=height+"px",event=seg.event,seg.contentTop!==undefined&&height-seg.contentTop<10&&(eventElement.find("div.fc-event-time").text(formatDate(event.start,opt("timeFormat"))+" - "+event.title),eventElement.find("div.fc-event-title").remove()),trigger("eventAfterRender",event,event,eventElement))}function slotSegHtml(event,seg){var html="<",url=event.url,skinCss=getSkinCss(event,opt),classes=["fc-event","fc-event-vert"];return isEventDraggable(event)&&classes.push("fc-event-draggable"),seg.isStart&&classes.push("fc-event-start"),seg.isEnd&&classes.push("fc-event-end"),classes=classes.concat(event.className),event.source&&(classes=classes.concat(event.source.className||[])),html+=url?"a href='"+htmlEscape(event.url)+"'":"div",html+=" class='"+classes.join(" ")+"' style='position:absolute;top:"+seg.top+"px;left:"+seg.left+"px;"+skinCss+"'><div class='fc-event-inner'><div class='fc-event-time'>"+htmlEscape(formatDates(event.start,event.end,opt("timeFormat")))+"</div><div class='fc-event-title'>"+htmlEscape(event.title||"")+"</div></div><div class='fc-event-bg'></div>",seg.isEnd&&isEventResizable(event)&&(html+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),html+="</"+(url?"a":"div")+">"}function bindSlotSeg(event,eventElement,seg){var timeElement=eventElement.find("div.fc-event-time");isEventDraggable(event)&&draggableSlotEvent(event,eventElement,timeElement),seg.isEnd&&isEventResizable(event)&&resizableSlotEvent(event,eventElement,timeElement),eventElementHandlers(event,eventElement)}function draggableDayEvent(event,eventElement,seg){function resetElement(){allDay||(eventElement.width(origWidth).height("").draggable("option","grid",null),allDay=!0)}var origWidth,revert,dayDelta,isStart=seg.isStart,allDay=!0,hoverListener=getHoverListener(),colWidth=getColWidth(),snapHeight=getSnapHeight(),snapMinutes=getSnapMinutes(),minMinute=getMinMinute();eventElement.draggable({opacity:opt("dragOpacity","month"),revertDuration:opt("dragRevertDuration"),start:function(ev,ui){trigger("eventDragStart",eventElement,event,ev,ui),hideEvents(event,eventElement),origWidth=eventElement.width(),hoverListener.start(function(cell,origCell){if(clearOverlays(),cell){revert=!1;var origDate=cellToDate(0,origCell.col),date=cellToDate(0,cell.col);dayDelta=dayDiff(date,origDate),cell.row?isStart?allDay&&(eventElement.width(colWidth-10),setOuterHeight(eventElement,snapHeight*Math.round((event.end?(event.end-event.start)/MINUTE_MS:opt("defaultEventMinutes"))/snapMinutes)),eventElement.draggable("option","grid",[colWidth,1]),allDay=!1):revert=!0:(renderDayOverlay(addDays(cloneDate(event.start),dayDelta),addDays(exclEndDay(event),dayDelta)),resetElement()),revert=revert||allDay&&!dayDelta}else resetElement(),revert=!0;eventElement.draggable("option","revert",revert)},ev,"drag")},stop:function(ev,ui){if(hoverListener.stop(),clearOverlays(),trigger("eventDragStop",eventElement,event,ev,ui),revert)resetElement(),eventElement.css("filter",""),showEvents(event,eventElement);else{var minuteDelta=0;allDay||(minuteDelta=Math.round((eventElement.offset().top-getSlotContainer().offset().top)/snapHeight)*snapMinutes+minMinute-(60*event.start.getHours()+event.start.getMinutes())),eventDrop(this,event,dayDelta,minuteDelta,allDay,ev,ui)}}})}function draggableSlotEvent(event,eventElement,timeElement){function updateUI(){clearOverlays(),isInBounds&&(isAllDay?(timeElement.hide(),eventElement.draggable("option","grid",null),renderDayOverlay(addDays(cloneDate(event.start),dayDelta),addDays(exclEndDay(event),dayDelta))):(updateTimeText(minuteDelta),timeElement.css("display",""),eventElement.draggable("option","grid",[colWidth,snapHeight])))}function updateTimeText(minuteDelta){var newEnd,newStart=addMinutes(cloneDate(event.start),minuteDelta);event.end&&(newEnd=addMinutes(cloneDate(event.end),minuteDelta)),timeElement.text(formatDates(newStart,newEnd,opt("timeFormat")))}var origPosition,origCell,isInBounds,prevIsInBounds,isAllDay,prevIsAllDay,colDelta,prevColDelta,dayDelta,minuteDelta,prevMinuteDelta,coordinateGrid=t.getCoordinateGrid(),colCnt=getColCnt(),colWidth=getColWidth(),snapHeight=getSnapHeight(),snapMinutes=getSnapMinutes();eventElement.draggable({scroll:!1,grid:[colWidth,snapHeight],axis:1==colCnt?"y":!1,opacity:opt("dragOpacity"),revertDuration:opt("dragRevertDuration"),start:function(ev,ui){trigger("eventDragStart",eventElement,event,ev,ui),hideEvents(event,eventElement),coordinateGrid.build(),origPosition=eventElement.position(),origCell=coordinateGrid.cell(ev.pageX,ev.pageY),isInBounds=prevIsInBounds=!0,isAllDay=prevIsAllDay=getIsCellAllDay(origCell),colDelta=prevColDelta=0,dayDelta=0,minuteDelta=prevMinuteDelta=0},drag:function(ev,ui){var cell=coordinateGrid.cell(ev.pageX,ev.pageY);if(isInBounds=!!cell){if(isAllDay=getIsCellAllDay(cell),colDelta=Math.round((ui.position.left-origPosition.left)/colWidth),colDelta!=prevColDelta){var origDate=cellToDate(0,origCell.col),col=origCell.col+colDelta;col=Math.max(0,col),col=Math.min(colCnt-1,col);var date=cellToDate(0,col);dayDelta=dayDiff(date,origDate)}isAllDay||(minuteDelta=Math.round((ui.position.top-origPosition.top)/snapHeight)*snapMinutes)}(isInBounds!=prevIsInBounds||isAllDay!=prevIsAllDay||colDelta!=prevColDelta||minuteDelta!=prevMinuteDelta)&&(updateUI(),prevIsInBounds=isInBounds,prevIsAllDay=isAllDay,prevColDelta=colDelta,prevMinuteDelta=minuteDelta),eventElement.draggable("option","revert",!isInBounds)},stop:function(ev,ui){clearOverlays(),trigger("eventDragStop",eventElement,event,ev,ui),isInBounds&&(isAllDay||dayDelta||minuteDelta)?eventDrop(this,event,dayDelta,isAllDay?0:minuteDelta,isAllDay,ev,ui):(isInBounds=!0,isAllDay=!1,colDelta=0,dayDelta=0,minuteDelta=0,updateUI(),eventElement.css("filter",""),eventElement.css(origPosition),showEvents(event,eventElement))}})}function resizableSlotEvent(event,eventElement,timeElement){var snapDelta,prevSnapDelta,snapHeight=getSnapHeight(),snapMinutes=getSnapMinutes();eventElement.resizable({handles:{s:".ui-resizable-handle"},grid:snapHeight,start:function(ev,ui){snapDelta=prevSnapDelta=0,hideEvents(event,eventElement),trigger("eventResizeStart",this,event,ev,ui)},resize:function(ev,ui){snapDelta=Math.round((Math.max(snapHeight,eventElement.height())-ui.originalSize.height)/snapHeight),snapDelta!=prevSnapDelta&&(timeElement.text(formatDates(event.start,snapDelta||event.end?addMinutes(eventEnd(event),snapMinutes*snapDelta):null,opt("timeFormat"))),prevSnapDelta=snapDelta)},stop:function(ev,ui){trigger("eventResizeStop",this,event,ev,ui),snapDelta?eventResize(this,event,0,snapMinutes*snapDelta,ev,ui):showEvents(event,eventElement)}})}var t=this;t.renderEvents=renderEvents,t.clearEvents=clearEvents,t.slotSegHtml=slotSegHtml,DayEventRenderer.call(t);var opt=t.opt,trigger=t.trigger,isEventDraggable=t.isEventDraggable,isEventResizable=t.isEventResizable,eventEnd=t.eventEnd,eventElementHandlers=t.eventElementHandlers,setHeight=t.setHeight,getDaySegmentContainer=t.getDaySegmentContainer,getSlotSegmentContainer=t.getSlotSegmentContainer,getHoverListener=t.getHoverListener,getMaxMinute=t.getMaxMinute,getMinMinute=t.getMinMinute,timePosition=t.timePosition,getIsCellAllDay=t.getIsCellAllDay,colContentLeft=t.colContentLeft,colContentRight=t.colContentRight,cellToDate=t.cellToDate,getColCnt=t.getColCnt,getColWidth=t.getColWidth,getSnapHeight=t.getSnapHeight,getSnapMinutes=t.getSnapMinutes,getSlotContainer=t.getSlotContainer,reportEventElement=t.reportEventElement,showEvents=t.showEvents,hideEvents=t.hideEvents,eventDrop=t.eventDrop,eventResize=t.eventResize,renderDayOverlay=t.renderDayOverlay,clearOverlays=t.clearOverlays,renderDayEvents=t.renderDayEvents,calendar=t.calendar,formatDate=calendar.formatDate,formatDates=calendar.formatDates;t.draggableDayEvent=draggableDayEvent}function placeSlotSegs(segs){var i,levels=buildSlotSegLevels(segs),level0=levels[0];if(computeForwardSlotSegs(levels),level0){for(i=0;i<level0.length;i++)computeSlotSegPressures(level0[i]);for(i=0;i<level0.length;i++)computeSlotSegCoords(level0[i],0,0)}return flattenSlotSegLevels(levels)}function buildSlotSegLevels(segs){var i,seg,j,levels=[];for(i=0;i<segs.length;i++){for(seg=segs[i],j=0;j<levels.length&&computeSlotSegCollisions(seg,levels[j]).length;j++);(levels[j]||(levels[j]=[])).push(seg)}return levels}function computeForwardSlotSegs(levels){var i,level,j,seg,k;for(i=0;i<levels.length;i++)for(level=levels[i],j=0;j<level.length;j++)for(seg=level[j],seg.forwardSegs=[],k=i+1;k<levels.length;k++)computeSlotSegCollisions(seg,levels[k],seg.forwardSegs)}function computeSlotSegPressures(seg){var i,forwardSeg,forwardSegs=seg.forwardSegs,forwardPressure=0;if(seg.forwardPressure===undefined){for(i=0;i<forwardSegs.length;i++)forwardSeg=forwardSegs[i],computeSlotSegPressures(forwardSeg),forwardPressure=Math.max(forwardPressure,1+forwardSeg.forwardPressure);seg.forwardPressure=forwardPressure}}function computeSlotSegCoords(seg,seriesBackwardPressure,seriesBackwardCoord){var i,forwardSegs=seg.forwardSegs;if(seg.forwardCoord===undefined)for(forwardSegs.length?(forwardSegs.sort(compareForwardSlotSegs),computeSlotSegCoords(forwardSegs[0],seriesBackwardPressure+1,seriesBackwardCoord),seg.forwardCoord=forwardSegs[0].backwardCoord):seg.forwardCoord=1,seg.backwardCoord=seg.forwardCoord-(seg.forwardCoord-seriesBackwardCoord)/(seriesBackwardPressure+1),i=0;i<forwardSegs.length;i++)computeSlotSegCoords(forwardSegs[i],0,seg.forwardCoord)}function flattenSlotSegLevels(levels){var i,level,j,segs=[];for(i=0;i<levels.length;i++)for(level=levels[i],j=0;j<level.length;j++)segs.push(level[j]);return segs}function computeSlotSegCollisions(seg,otherSegs,results){results=results||[];for(var i=0;i<otherSegs.length;i++)isSlotSegCollision(seg,otherSegs[i])&&results.push(otherSegs[i]);return results}function isSlotSegCollision(seg1,seg2){return seg1.end>seg2.start&&seg1.start<seg2.end}function compareForwardSlotSegs(seg1,seg2){return seg2.forwardPressure-seg1.forwardPressure||(seg1.backwardCoord||0)-(seg2.backwardCoord||0)||compareSlotSegs(seg1,seg2)}function compareSlotSegs(seg1,seg2){return seg1.start-seg2.start||seg2.end-seg2.start-(seg1.end-seg1.start)||(seg1.event.title||"").localeCompare(seg2.event.title)}function View(element,calendar,viewName){function opt(name,viewNameOverride){var v=options[name];return $.isPlainObject(v)?smartProperty(v,viewNameOverride||viewName):v}function trigger(name,thisObj){return calendar.trigger.apply(calendar,[name,thisObj||t].concat(Array.prototype.slice.call(arguments,2),[t]))}function isEventDraggable(event){var source=event.source||{};return firstDefined(event.startEditable,source.startEditable,opt("eventStartEditable"),event.editable,source.editable,opt("editable"))&&!opt("disableDragging")}function isEventResizable(event){var source=event.source||{};return firstDefined(event.durationEditable,source.durationEditable,opt("eventDurationEditable"),event.editable,source.editable,opt("editable"))&&!opt("disableResizing")}function setEventData(events){eventsByID={};var i,event,len=events.length;for(i=0;len>i;i++)event=events[i],eventsByID[event._id]?eventsByID[event._id].push(event):eventsByID[event._id]=[event]}function clearEventData(){eventsByID={},eventElementsByID={},eventElementCouples=[]}function eventEnd(event){return event.end?cloneDate(event.end):defaultEventEnd(event)}function reportEventElement(event,element){eventElementCouples.push({event:event,element:element}),eventElementsByID[event._id]?eventElementsByID[event._id].push(element):eventElementsByID[event._id]=[element]}function triggerEventDestroy(){$.each(eventElementCouples,function(i,couple){t.trigger("eventDestroy",couple.event,couple.event,couple.element)})}function eventElementHandlers(event,eventElement){eventElement.click(function(ev){return eventElement.hasClass("ui-draggable-dragging")||eventElement.hasClass("ui-resizable-resizing")?void 0:trigger("eventClick",this,event,ev)
}).hover(function(ev){trigger("eventMouseover",this,event,ev)},function(ev){trigger("eventMouseout",this,event,ev)})}function showEvents(event,exceptElement){eachEventElement(event,exceptElement,"show")}function hideEvents(event,exceptElement){eachEventElement(event,exceptElement,"hide")}function eachEventElement(event,exceptElement,funcName){var i,elements=eventElementsByID[event._id],len=elements.length;for(i=0;len>i;i++)exceptElement&&elements[i][0]==exceptElement[0]||elements[i][funcName]()}function eventDrop(e,event,dayDelta,minuteDelta,allDay,ev,ui){var oldAllDay=event.allDay,eventId=event._id;moveEvents(eventsByID[eventId],dayDelta,minuteDelta,allDay),trigger("eventDrop",e,event,dayDelta,minuteDelta,allDay,function(){moveEvents(eventsByID[eventId],-dayDelta,-minuteDelta,oldAllDay),reportEventChange(eventId)},ev,ui),reportEventChange(eventId)}function eventResize(e,event,dayDelta,minuteDelta,ev,ui){var eventId=event._id;elongateEvents(eventsByID[eventId],dayDelta,minuteDelta),trigger("eventResize",e,event,dayDelta,minuteDelta,function(){elongateEvents(eventsByID[eventId],-dayDelta,-minuteDelta),reportEventChange(eventId)},ev,ui),reportEventChange(eventId)}function moveEvents(events,dayDelta,minuteDelta,allDay){minuteDelta=minuteDelta||0;for(var e,len=events.length,i=0;len>i;i++)e=events[i],allDay!==undefined&&(e.allDay=allDay),addMinutes(addDays(e.start,dayDelta,!0),minuteDelta),e.end&&(e.end=addMinutes(addDays(e.end,dayDelta,!0),minuteDelta)),normalizeEvent(e,options)}function elongateEvents(events,dayDelta,minuteDelta){minuteDelta=minuteDelta||0;for(var e,len=events.length,i=0;len>i;i++)e=events[i],e.end=addMinutes(addDays(eventEnd(e),dayDelta,!0),minuteDelta),normalizeEvent(e,options)}function isHiddenDay(day){return"object"==typeof day&&(day=day.getDay()),isHiddenDayHash[day]}function getCellsPerWeek(){return cellsPerWeek}function skipHiddenDays(date,inc,isExclusive){for(inc=inc||1;isHiddenDayHash[(date.getDay()+(isExclusive?inc:0)+7)%7];)addDays(date,inc)}function cellToDate(){var cellOffset=cellToCellOffset.apply(null,arguments),dayOffset=cellOffsetToDayOffset(cellOffset),date=dayOffsetToDate(dayOffset);return date}function cellToCellOffset(row,col){var colCnt=t.getColCnt(),dis=isRTL?-1:1,dit=isRTL?colCnt-1:0;"object"==typeof row&&(col=row.col,row=row.row);var cellOffset=row*colCnt+(col*dis+dit);return cellOffset}function cellOffsetToDayOffset(cellOffset){var day0=t.visStart.getDay();return cellOffset+=dayToCellMap[day0],7*Math.floor(cellOffset/cellsPerWeek)+cellToDayMap[(cellOffset%cellsPerWeek+cellsPerWeek)%cellsPerWeek]-day0}function dayOffsetToDate(dayOffset){var date=cloneDate(t.visStart);return addDays(date,dayOffset),date}function dateToCell(date){var dayOffset=dateToDayOffset(date),cellOffset=dayOffsetToCellOffset(dayOffset),cell=cellOffsetToCell(cellOffset);return cell}function dateToDayOffset(date){return dayDiff(date,t.visStart)}function dayOffsetToCellOffset(dayOffset){var day0=t.visStart.getDay();return dayOffset+=day0,Math.floor(dayOffset/7)*cellsPerWeek+dayToCellMap[(dayOffset%7+7)%7]-dayToCellMap[day0]}function cellOffsetToCell(cellOffset){var colCnt=t.getColCnt(),dis=isRTL?-1:1,dit=isRTL?colCnt-1:0,row=Math.floor(cellOffset/colCnt),col=(cellOffset%colCnt+colCnt)%colCnt*dis+dit;return{row:row,col:col}}function rangeToSegments(startDate,endDate){for(var rowCnt=t.getRowCnt(),colCnt=t.getColCnt(),segments=[],rangeDayOffsetStart=dateToDayOffset(startDate),rangeDayOffsetEnd=dateToDayOffset(endDate),rangeCellOffsetFirst=dayOffsetToCellOffset(rangeDayOffsetStart),rangeCellOffsetLast=dayOffsetToCellOffset(rangeDayOffsetEnd)-1,row=0;rowCnt>row;row++){var rowCellOffsetFirst=row*colCnt,rowCellOffsetLast=rowCellOffsetFirst+colCnt-1,segmentCellOffsetFirst=Math.max(rangeCellOffsetFirst,rowCellOffsetFirst),segmentCellOffsetLast=Math.min(rangeCellOffsetLast,rowCellOffsetLast);if(segmentCellOffsetLast>=segmentCellOffsetFirst){var segmentCellFirst=cellOffsetToCell(segmentCellOffsetFirst),segmentCellLast=cellOffsetToCell(segmentCellOffsetLast),cols=[segmentCellFirst.col,segmentCellLast.col].sort(),isStart=cellOffsetToDayOffset(segmentCellOffsetFirst)==rangeDayOffsetStart,isEnd=cellOffsetToDayOffset(segmentCellOffsetLast)+1==rangeDayOffsetEnd;segments.push({row:row,leftCol:cols[0],rightCol:cols[1],isStart:isStart,isEnd:isEnd})}}return segments}var t=this;t.element=element,t.calendar=calendar,t.name=viewName,t.opt=opt,t.trigger=trigger,t.isEventDraggable=isEventDraggable,t.isEventResizable=isEventResizable,t.setEventData=setEventData,t.clearEventData=clearEventData,t.eventEnd=eventEnd,t.reportEventElement=reportEventElement,t.triggerEventDestroy=triggerEventDestroy,t.eventElementHandlers=eventElementHandlers,t.showEvents=showEvents,t.hideEvents=hideEvents,t.eventDrop=eventDrop,t.eventResize=eventResize;var defaultEventEnd=t.defaultEventEnd,normalizeEvent=calendar.normalizeEvent,reportEventChange=calendar.reportEventChange,eventsByID={},eventElementsByID={},eventElementCouples=[],options=calendar.options;t.isHiddenDay=isHiddenDay,t.skipHiddenDays=skipHiddenDays,t.getCellsPerWeek=getCellsPerWeek,t.dateToCell=dateToCell,t.dateToDayOffset=dateToDayOffset,t.dayOffsetToCellOffset=dayOffsetToCellOffset,t.cellOffsetToCell=cellOffsetToCell,t.cellToDate=cellToDate,t.cellToCellOffset=cellToCellOffset,t.cellOffsetToDayOffset=cellOffsetToDayOffset,t.dayOffsetToDate=dayOffsetToDate,t.rangeToSegments=rangeToSegments;var cellsPerWeek,hiddenDays=opt("hiddenDays")||[],isHiddenDayHash=[],dayToCellMap=[],cellToDayMap=[],isRTL=opt("isRTL");!function(){opt("weekends")===!1&&hiddenDays.push(0,6);for(var dayIndex=0,cellIndex=0;7>dayIndex;dayIndex++)dayToCellMap[dayIndex]=cellIndex,isHiddenDayHash[dayIndex]=-1!=$.inArray(dayIndex,hiddenDays),isHiddenDayHash[dayIndex]||(cellToDayMap[cellIndex]=dayIndex,cellIndex++);if(cellsPerWeek=cellIndex,!cellsPerWeek)throw"invalid hiddenDays"}()}function DayEventRenderer(){function renderDayEvents(events,modifiedEventId){var segments=_renderDayEvents(events,!1,!0);segmentElementEach(segments,function(segment,element){reportEventElement(segment.event,element)}),attachHandlers(segments,modifiedEventId),segmentElementEach(segments,function(segment,element){trigger("eventAfterRender",segment.event,segment.event,element)})}function renderTempDayEvent(event,adjustRow,adjustTop){var segments=_renderDayEvents([event],!0,!1),elements=[];return segmentElementEach(segments,function(segment,element){segment.row===adjustRow&&element.css("top",adjustTop),elements.push(element[0])}),elements}function _renderDayEvents(events,doAppend,doRowHeights){var html,elements,finalContainer=getDaySegmentContainer(),renderContainer=doAppend?$("<div/>"):finalContainer,segments=buildSegments(events);return calculateHorizontals(segments),html=buildHTML(segments),renderContainer[0].innerHTML=html,elements=renderContainer.children(),doAppend&&finalContainer.append(elements),resolveElements(segments,elements),segmentElementEach(segments,function(segment,element){segment.hsides=hsides(element,!0)}),segmentElementEach(segments,function(segment,element){element.width(Math.max(0,segment.outerWidth-segment.hsides))}),segmentElementEach(segments,function(segment,element){segment.outerHeight=element.outerHeight(!0)}),setVerticals(segments,doRowHeights),segments}function buildSegments(events){for(var segments=[],i=0;i<events.length;i++){var eventSegments=buildSegmentsForEvent(events[i]);segments.push.apply(segments,eventSegments)}return segments}function buildSegmentsForEvent(event){for(var startDate=event.start,endDate=exclEndDay(event),segments=rangeToSegments(startDate,endDate),i=0;i<segments.length;i++)segments[i].event=event;return segments}function calculateHorizontals(segments){for(var isRTL=opt("isRTL"),i=0;i<segments.length;i++){var segment=segments[i],leftFunc=(isRTL?segment.isEnd:segment.isStart)?colContentLeft:colLeft,rightFunc=(isRTL?segment.isStart:segment.isEnd)?colContentRight:colRight,left=leftFunc(segment.leftCol),right=rightFunc(segment.rightCol);segment.left=left,segment.outerWidth=right-left}}function buildHTML(segments){for(var html="",i=0;i<segments.length;i++)html+=buildHTMLForSegment(segments[i]);return html}function buildHTMLForSegment(segment){var html="",isRTL=opt("isRTL"),event=segment.event,url=event.url,classNames=["fc-event","fc-event-hori"];isEventDraggable(event)&&classNames.push("fc-event-draggable"),segment.isStart&&classNames.push("fc-event-start"),segment.isEnd&&classNames.push("fc-event-end"),classNames=classNames.concat(event.className),event.source&&(classNames=classNames.concat(event.source.className||[]));var skinCss=getSkinCss(event,opt);return html+=url?"<a href='"+htmlEscape(url)+"'":"<div",html+=" class='"+classNames.join(" ")+"' style='position:absolute;left:"+segment.left+"px;"+skinCss+"'><div class='fc-event-inner'>",!event.allDay&&segment.isStart&&(html+="<span class='fc-event-time'>"+htmlEscape(formatDates(event.start,event.end,opt("timeFormat")))+"</span>"),html+="<span class='fc-event-title'>"+htmlEscape(event.title||"")+"</span></div>",segment.isEnd&&isEventResizable(event)&&(html+="<div class='ui-resizable-handle ui-resizable-"+(isRTL?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),html+="</"+(url?"a":"div")+">"}function resolveElements(segments,elements){for(var i=0;i<segments.length;i++){var segment=segments[i],event=segment.event,element=elements.eq(i),triggerRes=trigger("eventRender",event,event,element);triggerRes===!1?element.remove():(triggerRes&&triggerRes!==!0&&(triggerRes=$(triggerRes).css({position:"absolute",left:segment.left}),element.replaceWith(triggerRes),element=triggerRes),segment.element=element)}}function setVerticals(segments,doRowHeights){var rowContentHeights=calculateVerticals(segments),rowContentElements=getRowContentElements(),rowContentTops=[];if(doRowHeights)for(var i=0;i<rowContentElements.length;i++)rowContentElements[i].height(rowContentHeights[i]);for(var i=0;i<rowContentElements.length;i++)rowContentTops.push(rowContentElements[i].position().top);segmentElementEach(segments,function(segment,element){element.css("top",rowContentTops[segment.row]+segment.top)})}function calculateVerticals(segments){for(var rowCnt=getRowCnt(),colCnt=getColCnt(),rowContentHeights=[],segmentRows=buildSegmentRows(segments),rowI=0;rowCnt>rowI;rowI++){for(var segmentRow=segmentRows[rowI],colHeights=[],colI=0;colCnt>colI;colI++)colHeights.push(0);for(var segmentI=0;segmentI<segmentRow.length;segmentI++){var segment=segmentRow[segmentI];segment.top=arrayMax(colHeights.slice(segment.leftCol,segment.rightCol+1));for(var colI=segment.leftCol;colI<=segment.rightCol;colI++)colHeights[colI]=segment.top+segment.outerHeight}rowContentHeights.push(arrayMax(colHeights))}return rowContentHeights}function buildSegmentRows(segments){var segmentI,segment,rowI,rowCnt=getRowCnt(),segmentRows=[];for(segmentI=0;segmentI<segments.length;segmentI++)segment=segments[segmentI],rowI=segment.row,segment.element&&(segmentRows[rowI]?segmentRows[rowI].push(segment):segmentRows[rowI]=[segment]);for(rowI=0;rowCnt>rowI;rowI++)segmentRows[rowI]=sortSegmentRow(segmentRows[rowI]||[]);return segmentRows}function sortSegmentRow(segments){for(var sortedSegments=[],subrows=buildSegmentSubrows(segments),i=0;i<subrows.length;i++)sortedSegments.push.apply(sortedSegments,subrows[i]);return sortedSegments}function buildSegmentSubrows(segments){segments.sort(compareDaySegments);for(var subrows=[],i=0;i<segments.length;i++){for(var segment=segments[i],j=0;j<subrows.length&&isDaySegmentCollision(segment,subrows[j]);j++);subrows[j]?subrows[j].push(segment):subrows[j]=[segment]}return subrows}function getRowContentElements(){var i,rowCnt=getRowCnt(),rowDivs=[];for(i=0;rowCnt>i;i++)rowDivs[i]=allDayRow(i).find("div.fc-day-content > div");return rowDivs}function attachHandlers(segments,modifiedEventId){var segmentContainer=getDaySegmentContainer();segmentElementEach(segments,function(segment,element,i){var event=segment.event;event._id===modifiedEventId?bindDaySeg(event,element,segment):element[0]._fci=i}),lazySegBind(segmentContainer,segments,bindDaySeg)}function bindDaySeg(event,eventElement,segment){isEventDraggable(event)&&t.draggableDayEvent(event,eventElement,segment),segment.isEnd&&isEventResizable(event)&&t.resizableDayEvent(event,eventElement,segment),eventElementHandlers(event,eventElement)}function draggableDayEvent(event,eventElement){var dayDelta,hoverListener=getHoverListener();eventElement.draggable({delay:50,opacity:opt("dragOpacity"),revertDuration:opt("dragRevertDuration"),start:function(ev,ui){trigger("eventDragStart",eventElement,event,ev,ui),hideEvents(event,eventElement),hoverListener.start(function(cell,origCell,rowDelta,colDelta){if(eventElement.draggable("option","revert",!cell||!rowDelta&&!colDelta),clearOverlays(),cell){var origDate=cellToDate(origCell),date=cellToDate(cell);dayDelta=dayDiff(date,origDate),renderDayOverlay(addDays(cloneDate(event.start),dayDelta),addDays(exclEndDay(event),dayDelta))}else dayDelta=0},ev,"drag")},stop:function(ev,ui){hoverListener.stop(),clearOverlays(),trigger("eventDragStop",eventElement,event,ev,ui),dayDelta?eventDrop(this,event,dayDelta,0,event.allDay,ev,ui):(eventElement.css("filter",""),showEvents(event,eventElement))}})}function resizableDayEvent(event,element,segment){var isRTL=opt("isRTL"),direction=isRTL?"w":"e",handle=element.find(".ui-resizable-"+direction),isResizing=!1;disableTextSelection(element),element.mousedown(function(ev){ev.preventDefault()}).click(function(ev){isResizing&&(ev.preventDefault(),ev.stopImmediatePropagation())}),handle.mousedown(function(ev){function mouseup(ev){trigger("eventResizeStop",this,event,ev),$("body").css("cursor",""),hoverListener.stop(),clearOverlays(),dayDelta&&eventResize(this,event,dayDelta,0,ev),setTimeout(function(){isResizing=!1},0)}if(1==ev.which){isResizing=!0;var dayDelta,helpers,hoverListener=getHoverListener(),elementTop=(getRowCnt(),getColCnt(),element.css("top")),eventCopy=$.extend({},event),minCellOffset=dayOffsetToCellOffset(dateToDayOffset(event.start));clearSelection(),$("body").css("cursor",direction+"-resize").one("mouseup",mouseup),trigger("eventResizeStart",this,event,ev),hoverListener.start(function(cell,origCell){if(cell){var origCellOffset=cellToCellOffset(origCell),cellOffset=cellToCellOffset(cell);if(cellOffset=Math.max(cellOffset,minCellOffset),dayDelta=cellOffsetToDayOffset(cellOffset)-cellOffsetToDayOffset(origCellOffset)){eventCopy.end=addDays(eventEnd(event),dayDelta,!0);var oldHelpers=helpers;helpers=renderTempDayEvent(eventCopy,segment.row,elementTop),helpers=$(helpers),helpers.find("*").css("cursor",direction+"-resize"),oldHelpers&&oldHelpers.remove(),hideEvents(event)}else helpers&&(showEvents(event),helpers.remove(),helpers=null);clearOverlays(),renderDayOverlay(event.start,addDays(exclEndDay(event),dayDelta))}},ev)}})}var t=this;t.renderDayEvents=renderDayEvents,t.draggableDayEvent=draggableDayEvent,t.resizableDayEvent=resizableDayEvent;var opt=t.opt,trigger=t.trigger,isEventDraggable=t.isEventDraggable,isEventResizable=t.isEventResizable,eventEnd=t.eventEnd,reportEventElement=t.reportEventElement,eventElementHandlers=t.eventElementHandlers,showEvents=t.showEvents,hideEvents=t.hideEvents,eventDrop=t.eventDrop,eventResize=t.eventResize,getRowCnt=t.getRowCnt,getColCnt=t.getColCnt,allDayRow=(t.getColWidth,t.allDayRow),colLeft=t.colLeft,colRight=t.colRight,colContentLeft=t.colContentLeft,colContentRight=t.colContentRight,getDaySegmentContainer=(t.dateToCell,t.getDaySegmentContainer),formatDates=t.calendar.formatDates,renderDayOverlay=t.renderDayOverlay,clearOverlays=t.clearOverlays,clearSelection=t.clearSelection,getHoverListener=t.getHoverListener,rangeToSegments=t.rangeToSegments,cellToDate=t.cellToDate,cellToCellOffset=t.cellToCellOffset,cellOffsetToDayOffset=t.cellOffsetToDayOffset,dateToDayOffset=t.dateToDayOffset,dayOffsetToCellOffset=t.dayOffsetToCellOffset}function isDaySegmentCollision(segment,otherSegments){for(var i=0;i<otherSegments.length;i++){var otherSegment=otherSegments[i];if(otherSegment.leftCol<=segment.rightCol&&otherSegment.rightCol>=segment.leftCol)return!0}return!1}function segmentElementEach(segments,callback){for(var i=0;i<segments.length;i++){var segment=segments[i],element=segment.element;element&&callback(segment,element,i)}}function compareDaySegments(a,b){return b.rightCol-b.leftCol-(a.rightCol-a.leftCol)||b.event.allDay-a.event.allDay||a.event.start-b.event.start||(a.event.title||"").localeCompare(b.event.title)}function SelectionManager(){function select(startDate,endDate,allDay){unselect(),endDate||(endDate=defaultSelectionEnd(startDate,allDay)),renderSelection(startDate,endDate,allDay),reportSelection(startDate,endDate,allDay)}function unselect(ev){selected&&(selected=!1,clearSelection(),trigger("unselect",null,ev))}function reportSelection(startDate,endDate,allDay,ev){selected=!0,trigger("select",null,startDate,endDate,allDay,ev)}function daySelectionMousedown(ev){var cellToDate=t.cellToDate,getIsCellAllDay=t.getIsCellAllDay,hoverListener=t.getHoverListener(),reportDayClick=t.reportDayClick;if(1==ev.which&&opt("selectable")){unselect(ev);var dates;hoverListener.start(function(cell,origCell){clearSelection(),cell&&getIsCellAllDay(cell)?(dates=[cellToDate(origCell),cellToDate(cell)].sort(dateCompare),renderSelection(dates[0],dates[1],!0)):dates=null},ev),$(document).one("mouseup",function(ev){hoverListener.stop(),dates&&(+dates[0]==+dates[1]&&reportDayClick(dates[0],!0,ev),reportSelection(dates[0],dates[1],!0,ev))})}}var t=this;t.select=select,t.unselect=unselect,t.reportSelection=reportSelection,t.daySelectionMousedown=daySelectionMousedown;var opt=t.opt,trigger=t.trigger,defaultSelectionEnd=t.defaultSelectionEnd,renderSelection=t.renderSelection,clearSelection=t.clearSelection,selected=!1;opt("selectable")&&opt("unselectAuto")&&$(document).mousedown(function(ev){var ignore=opt("unselectCancel");ignore&&$(ev.target).parents(ignore).length||unselect(ev)})}function OverlayManager(){function renderOverlay(rect,parent){var e=unusedOverlays.shift();return e||(e=$("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),e[0].parentNode!=parent[0]&&e.appendTo(parent),usedOverlays.push(e.css(rect).show()),e}function clearOverlays(){for(var e;e=usedOverlays.shift();)unusedOverlays.push(e.hide().unbind())}var t=this;t.renderOverlay=renderOverlay,t.clearOverlays=clearOverlays;var usedOverlays=[],unusedOverlays=[]}function CoordinateGrid(buildFunc){var rows,cols,t=this;t.build=function(){rows=[],cols=[],buildFunc(rows,cols)},t.cell=function(x,y){var i,rowCnt=rows.length,colCnt=cols.length,r=-1,c=-1;for(i=0;rowCnt>i;i++)if(y>=rows[i][0]&&y<rows[i][1]){r=i;break}for(i=0;colCnt>i;i++)if(x>=cols[i][0]&&x<cols[i][1]){c=i;break}return r>=0&&c>=0?{row:r,col:c}:null},t.rect=function(row0,col0,row1,col1,originElement){var origin=originElement.offset();return{top:rows[row0][0]-origin.top,left:cols[col0][0]-origin.left,width:cols[col1][1]-cols[col0][0],height:rows[row1][1]-rows[row0][0]}}}function HoverListener(coordinateGrid){function mouse(ev){_fixUIEvent(ev);var newCell=coordinateGrid.cell(ev.pageX,ev.pageY);(!newCell!=!cell||newCell&&(newCell.row!=cell.row||newCell.col!=cell.col))&&(newCell?(firstCell||(firstCell=newCell),change(newCell,firstCell,newCell.row-firstCell.row,newCell.col-firstCell.col)):change(newCell,firstCell),cell=newCell)}var bindType,change,firstCell,cell,t=this;t.start=function(_change,ev,_bindType){change=_change,firstCell=cell=null,coordinateGrid.build(),mouse(ev),bindType=_bindType||"mousemove",$(document).bind(bindType,mouse)},t.stop=function(){return $(document).unbind(bindType,mouse),cell}}function _fixUIEvent(event){event.pageX===undefined&&(event.pageX=event.originalEvent.pageX,event.pageY=event.originalEvent.pageY)}function HorizontalPositionCache(getElement){function e(i){return elements[i]=elements[i]||getElement(i)}var t=this,elements={},lefts={},rights={};t.left=function(i){return lefts[i]=lefts[i]===undefined?e(i).position().left:lefts[i]},t.right=function(i){return rights[i]=rights[i]===undefined?t.left(i)+e(i).width():rights[i]},t.clear=function(){elements={},lefts={},rights={}}}var defaults={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},fc=$.fullCalendar={version:"1.6.4"},fcViews=fc.views={};$.fn.fullCalendar=function(options){if("string"==typeof options){var res,args=Array.prototype.slice.call(arguments,1);return this.each(function(){var calendar=$.data(this,"fullCalendar");if(calendar&&$.isFunction(calendar[options])){var r=calendar[options].apply(calendar,args);res===undefined&&(res=r),"destroy"==options&&$.removeData(this,"fullCalendar")}}),res!==undefined?res:this}options=options||{};var eventSources=options.eventSources||[];return delete options.eventSources,options.events&&(eventSources.push(options.events),delete options.events),options=$.extend(!0,{},defaults,options.isRTL||options.isRTL===undefined&&defaults.isRTL?rtlDefaults:{},options),this.each(function(i,_element){var element=$(_element),calendar=new Calendar(element,options,eventSources);element.data("fullCalendar",calendar),calendar.render()}),this},fc.sourceNormalizers=[],fc.sourceFetchers=[];var ajaxDefaults={dataType:"json",cache:!1},eventGUID=1;fc.addDays=addDays,fc.cloneDate=cloneDate,fc.parseDate=parseDate,fc.parseISO8601=parseISO8601,fc.parseTime=parseTime,fc.formatDate=formatDate,fc.formatDates=formatDates;var dayIDs=["sun","mon","tue","wed","thu","fri","sat"],DAY_MS=864e5,HOUR_MS=36e5,MINUTE_MS=6e4,dateFormatters={s:function(d){return d.getSeconds()},ss:function(d){return zeroPad(d.getSeconds())},m:function(d){return d.getMinutes()},mm:function(d){return zeroPad(d.getMinutes())},h:function(d){return d.getHours()%12||12},hh:function(d){return zeroPad(d.getHours()%12||12)},H:function(d){return d.getHours()},HH:function(d){return zeroPad(d.getHours())},d:function(d){return d.getDate()},dd:function(d){return zeroPad(d.getDate())},ddd:function(d,o){return o.dayNamesShort[d.getDay()]},dddd:function(d,o){return o.dayNames[d.getDay()]},M:function(d){return d.getMonth()+1},MM:function(d){return zeroPad(d.getMonth()+1)},MMM:function(d,o){return o.monthNamesShort[d.getMonth()]},MMMM:function(d,o){return o.monthNames[d.getMonth()]},yy:function(d){return(d.getFullYear()+"").substring(2)},yyyy:function(d){return d.getFullYear()},t:function(d){return d.getHours()<12?"a":"p"},tt:function(d){return d.getHours()<12?"am":"pm"},T:function(d){return d.getHours()<12?"A":"P"},TT:function(d){return d.getHours()<12?"AM":"PM"},u:function(d){return formatDate(d,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(d){var date=d.getDate();return date>10&&20>date?"th":["st","nd","rd"][date%10-1]||"th"},w:function(d,o){return o.weekNumberCalculation(d)},W:function(d){return iso8601Week(d)}};fc.dateFormatters=dateFormatters,fc.applyAll=applyAll,fcViews.month=MonthView,fcViews.basicWeek=BasicWeekView,fcViews.basicDay=BasicDayView,setDefaults({weekMode:"fixed"}),fcViews.agendaWeek=AgendaWeekView,fcViews.agendaDay=AgendaDayView,setDefaults({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap requires jQuery");+function($){"use strict";function transitionEnd(){var el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames)if(void 0!==el.style[name])return{end:transEndEventNames[name]}}$.fn.emulateTransitionEnd=function(duration){var called=!1,$el=this;$(this).one($.support.transition.end,function(){called=!0});var callback=function(){called||$($el).trigger($.support.transition.end)};return setTimeout(callback,duration),this},$(function(){$.support.transition=transitionEnd()})}(jQuery),+function($){"use strict";var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.prototype.close=function(e){function removeElement(){$parent.trigger("closed.bs.alert").remove()}var $this=$(this),selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=$(selector);e&&e.preventDefault(),$parent.length||($parent=$this.hasClass("alert")?$this:$this.parent()),$parent.trigger(e=$.Event("close.bs.alert")),e.isDefaultPrevented()||($parent.removeClass("in"),$.support.transition&&$parent.hasClass("fade")?$parent.one($.support.transition.end,removeElement).emulateTransitionEnd(150):removeElement())};var old=$.fn.alert;$.fn.alert=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.alert");data||$this.data("bs.alert",data=new Alert(this)),"string"==typeof option&&data[option].call($this)})},$.fn.alert.Constructor=Alert,$.fn.alert.noConflict=function(){return $.fn.alert=old,this},$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery),+function($){"use strict";var Button=function(element,options){this.$element=$(element),this.options=$.extend({},Button.DEFAULTS,options)};Button.DEFAULTS={loadingText:"loading..."},Button.prototype.setState=function(state){var d="disabled",$el=this.$element,val=$el.is("input")?"val":"html",data=$el.data();state+="Text",data.resetText||$el.data("resetText",$el[val]()),$el[val](data[state]||this.options[state]),setTimeout(function(){"loadingText"==state?$el.addClass(d).attr(d,d):$el.removeClass(d).removeAttr(d)},0)},Button.prototype.toggle=function(){var $parent=this.$element.closest('[data-toggle="buttons"]');if($parent.length){var $input=this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change");"radio"===$input.prop("type")&&$parent.find(".active").removeClass("active")}this.$element.toggleClass("active")};var old=$.fn.button;$.fn.button=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.button"),options="object"==typeof option&&option;data||$this.data("bs.button",data=new Button(this,options)),"toggle"==option?data.toggle():option&&data.setState(option)})},$.fn.button.Constructor=Button,$.fn.button.noConflict=function(){return $.fn.button=old,this},$(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var $btn=$(e.target);$btn.hasClass("btn")||($btn=$btn.closest(".btn")),$btn.button("toggle"),e.preventDefault()})}(jQuery),+function($){"use strict";var Carousel=function(element,options){this.$element=$(element),this.$indicators=this.$element.find(".carousel-indicators"),this.options=options,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))};Carousel.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},Carousel.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval)),this},Carousel.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},Carousel.prototype.to=function(pos){var that=this,activeIndex=this.getActiveIndex();return pos>this.$items.length-1||0>pos?void 0:this.sliding?this.$element.one("slid",function(){that.to(pos)}):activeIndex==pos?this.pause().cycle():this.slide(pos>activeIndex?"next":"prev",$(this.$items[pos]))},Carousel.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&$.support.transition.end&&(this.$element.trigger($.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},Carousel.prototype.next=function(){return this.sliding?void 0:this.slide("next")},Carousel.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},Carousel.prototype.slide=function(type,next){var $active=this.$element.find(".item.active"),$next=next||$active[type](),isCycling=this.interval,direction="next"==type?"left":"right",fallback="next"==type?"first":"last",that=this;if(!$next.length){if(!this.options.wrap)return;$next=this.$element.find(".item")[fallback]()}this.sliding=!0,isCycling&&this.pause();var e=$.Event("slide.bs.carousel",{relatedTarget:$next[0],direction:direction});if(!$next.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var $nextIndicator=$(that.$indicators.children()[that.getActiveIndex()]);$nextIndicator&&$nextIndicator.addClass("active")})),$.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(e),e.isDefaultPrevented())return;$next.addClass(type),$next[0].offsetWidth,$active.addClass(direction),$next.addClass(direction),$active.one($.support.transition.end,function(){$next.removeClass([type,direction].join(" ")).addClass("active"),$active.removeClass(["active",direction].join(" ")),that.sliding=!1,setTimeout(function(){that.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(e),e.isDefaultPrevented())return;$active.removeClass("active"),$next.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return isCycling&&this.cycle(),this}};var old=$.fn.carousel;$.fn.carousel=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.carousel"),options=$.extend({},Carousel.DEFAULTS,$this.data(),"object"==typeof option&&option),action="string"==typeof option?option:options.slide;data||$this.data("bs.carousel",data=new Carousel(this,options)),"number"==typeof option?data.to(option):action?data[action]():options.interval&&data.pause().cycle()})},$.fn.carousel.Constructor=Carousel,$.fn.carousel.noConflict=function(){return $.fn.carousel=old,this},$(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var href,$this=$(this),$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")),options=$.extend({},$target.data(),$this.data()),slideIndex=$this.attr("data-slide-to");slideIndex&&(options.interval=!1),$target.carousel(options),(slideIndex=$this.attr("data-slide-to"))&&$target.data("bs.carousel").to(slideIndex),e.preventDefault()}),$(window).on("load",function(){$('[data-ride="carousel"]').each(function(){var $carousel=$(this);
$carousel.carousel($carousel.data())})})}(jQuery),+function($){"use strict";var Collapse=function(element,options){this.$element=$(element),this.options=$.extend({},Collapse.DEFAULTS,options),this.transitioning=null,this.options.parent&&(this.$parent=$(this.options.parent)),this.options.toggle&&this.toggle()};Collapse.DEFAULTS={toggle:!0},Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"},Collapse.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var startEvent=$.Event("show.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){var actives=this.$parent&&this.$parent.find("> .panel > .in");if(actives&&actives.length){var hasData=actives.data("bs.collapse");if(hasData&&hasData.transitioning)return;actives.collapse("hide"),hasData||actives.data("bs.collapse",null)}var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0),this.transitioning=1;var complete=function(){this.$element.removeClass("collapsing").addClass("in")[dimension]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350)[dimension](this.$element[0][scrollSize])}}},Collapse.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var startEvent=$.Event("hide.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var complete=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return $.support.transition?void this.$element[dimension](0).one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350):complete.call(this)}}},Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var old=$.fn.collapse;$.fn.collapse=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.collapse"),options=$.extend({},Collapse.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("bs.collapse",data=new Collapse(this,options)),"string"==typeof option&&data[option]()})},$.fn.collapse.Constructor=Collapse,$.fn.collapse.noConflict=function(){return $.fn.collapse=old,this},$(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var href,$this=$(this),target=$this.attr("data-target")||e.preventDefault()||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""),$target=$(target),data=$target.data("bs.collapse"),option=data?"toggle":$this.data(),parent=$this.attr("data-parent"),$parent=parent&&$(parent);data&&data.transitioning||($parent&&$parent.find('[data-toggle=collapse][data-parent="'+parent+'"]').not($this).addClass("collapsed"),$this[$target.hasClass("in")?"addClass":"removeClass"]("collapsed")),$target.collapse(option)})}(jQuery),+function($){"use strict";function clearMenus(){$(backdrop).remove(),$(toggle).each(function(e){var $parent=getParent($(this));$parent.hasClass("open")&&($parent.trigger(e=$.Event("hide.bs.dropdown")),e.isDefaultPrevented()||$parent.removeClass("open").trigger("hidden.bs.dropdown"))})}function getParent($this){var selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&/#/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}var backdrop=".dropdown-backdrop",toggle="[data-toggle=dropdown]",Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.prototype.toggle=function(e){var $this=$(this);if(!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(clearMenus(),!isActive){if("ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length&&$('<div class="dropdown-backdrop"/>').insertAfter($(this)).on("click",clearMenus),$parent.trigger(e=$.Event("show.bs.dropdown")),e.isDefaultPrevented())return;$parent.toggleClass("open").trigger("shown.bs.dropdown"),$this.focus()}return!1}},Dropdown.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var $this=$(this);if(e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(!isActive||isActive&&27==e.keyCode)return 27==e.which&&$parent.find(toggle).focus(),$this.click();var $items=$("[role=menu] li:not(.divider):visible a",$parent);if($items.length){var index=$items.index($items.filter(":focus"));38==e.keyCode&&index>0&&index--,40==e.keyCode&&index<$items.length-1&&index++,~index||(index=0),$items.eq(index).focus()}}}};var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("dropdown");data||$this.data("dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)})},$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle+", [role=menu]",Dropdown.prototype.keydown)}(jQuery),+function($){"use strict";var Modal=function(element,options){this.options=options,this.$element=$(element),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};Modal.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},Modal.prototype.toggle=function(_relatedTarget){return this[this.isShown?"hide":"show"](_relatedTarget)},Modal.prototype.show=function(_relatedTarget){var that=this,e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this)),this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(document.body),that.$element.show(),transition&&that.$element[0].offsetWidth,that.$element.addClass("in").attr("aria-hidden",!1),that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$element.find(".modal-dialog").one($.support.transition.end,function(){that.$element.focus().trigger(e)}).emulateTransitionEnd(300):that.$element.focus().trigger(e)}))},Modal.prototype.hide=function(e){e&&e.preventDefault(),e=$.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),$(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),$.support.transition&&this.$element.hasClass("fade")?this.$element.one($.support.transition.end,$.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},Modal.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",$.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},Modal.prototype.hideModal=function(){var that=this;this.$element.hide(),this.backdrop(function(){that.removeBackdrop(),that.$element.trigger("hidden.bs.modal")})},Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},Modal.prototype.backdrop=function(callback){var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;if(this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",$.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!callback)return;doAnimate?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback()):callback&&callback()};var old=$.fn.modal;$.fn.modal=function(option,_relatedTarget){return this.each(function(){var $this=$(this),data=$this.data("bs.modal"),options=$.extend({},Modal.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("bs.modal",data=new Modal(this,options)),"string"==typeof option?data[option](_relatedTarget):options.show&&data.show(_relatedTarget)})},$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());e.preventDefault(),$target.modal(option,this).one("hide",function(){$this.is(":visible")&&$this.focus()})}),$(document).on("show.bs.modal",".modal",function(){$(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){$(document.body).removeClass("modal-open")})}(jQuery),+function($){"use strict";var Tooltip=function(element,options){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",element,options)};Tooltip.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},Tooltip.prototype.init=function(type,element,options){this.enabled=!0,this.type=type,this.$element=$(element),this.options=this.getOptions(options);for(var triggers=this.options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];if("click"==trigger)this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if("manual"!=trigger){var eventIn="hover"==trigger?"mouseenter":"focus",eventOut="hover"==trigger?"mouseleave":"blur";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS},Tooltip.prototype.getOptions=function(options){return options=$.extend({},this.getDefaults(),this.$element.data(),options),options.delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},Tooltip.prototype.getDelegateOptions=function(){var options={},defaults=this.getDefaults();return this._options&&$.each(this._options,function(key,value){defaults[key]!=value&&(options[key]=value)}),options},Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(self.timeout),self.hoverState="in",self.options.delay&&self.options.delay.show?void(self.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show)):self.show()},Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(self.timeout),self.hoverState="out",self.options.delay&&self.options.delay.hide?void(self.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide)):self.hide()},Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var $tip=this.tip();this.setContent(),this.options.animation&&$tip.addClass("fade");var placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,autoToken=/\s?auto?\s?/i,autoPlace=autoToken.test(placement);autoPlace&&(placement=placement.replace(autoToken,"")||"top"),$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if(autoPlace){var $parent=this.$element.parent(),orgPlacement=placement,docScroll=document.documentElement.scrollTop||document.body.scrollTop,parentWidth="body"==this.options.container?window.innerWidth:$parent.outerWidth(),parentHeight="body"==this.options.container?window.innerHeight:$parent.outerHeight(),parentLeft="body"==this.options.container?0:$parent.offset().left;placement="bottom"==placement&&pos.top+pos.height+actualHeight-docScroll>parentHeight?"top":"top"==placement&&pos.top-docScroll-actualHeight<0?"bottom":"right"==placement&&pos.right+actualWidth>parentWidth?"left":"left"==placement&&pos.left-actualWidth<parentLeft?"right":placement,$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement),this.$element.trigger("shown.bs."+this.type)}},Tooltip.prototype.applyPlacement=function(offset,placement){var replace,$tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,marginTop=parseInt($tip.css("margin-top"),10),marginLeft=parseInt($tip.css("margin-left"),10);isNaN(marginTop)&&(marginTop=0),isNaN(marginLeft)&&(marginLeft=0),offset.top=offset.top+marginTop,offset.left=offset.left+marginLeft,$tip.offset(offset).addClass("in");var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if("top"==placement&&actualHeight!=height&&(replace=!0,offset.top=offset.top+height-actualHeight),/bottom|top/.test(placement)){var delta=0;offset.left<0&&(delta=-2*offset.left,offset.left=0,$tip.offset(offset),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight),this.replaceArrow(delta-width+actualWidth,actualWidth,"left")}else this.replaceArrow(actualHeight-height,actualHeight,"top");replace&&$tip.offset(offset)},Tooltip.prototype.replaceArrow=function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},Tooltip.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},Tooltip.prototype.hide=function(){function complete(){"in"!=that.hoverState&&$tip.detach()}var that=this,$tip=this.tip(),e=$.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:($tip.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?$tip.one($.support.transition.end,complete).emulateTransitionEnd(150):complete(),this.$element.trigger("hidden.bs."+this.type),this)},Tooltip.prototype.fixTitle=function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},Tooltip.prototype.hasContent=function(){return this.getTitle()},Tooltip.prototype.getPosition=function(){var el=this.$element[0];return $.extend({},"function"==typeof el.getBoundingClientRect?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())},Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return"bottom"==placement?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:"top"==placement?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:"left"==placement?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}},Tooltip.prototype.getTitle=function(){var title,$e=this.$element,o=this.options;return title=$e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},Tooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template)},Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},Tooltip.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},Tooltip.prototype.enable=function(){this.enabled=!0},Tooltip.prototype.disable=function(){this.enabled=!1},Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled},Tooltip.prototype.toggle=function(e){var self=e?$(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;self.tip().hasClass("in")?self.leave(self):self.enter(self)},Tooltip.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tooltip"),options="object"==typeof option&&option;data||$this.data("bs.tooltip",data=new Tooltip(this,options)),"string"==typeof option&&data[option]()})},$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.noConflict=function(){return $.fn.tooltip=old,this}}(jQuery),+function($){"use strict";var Popover=function(element,options){this.init("popover",element,options)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype),Popover.prototype.constructor=Popover,Popover.prototype.getDefaults=function(){return Popover.DEFAULTS},Popover.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title),$tip.find(".popover-content")[this.options.html?"html":"text"](content),$tip.removeClass("fade top bottom left right in"),$tip.find(".popover-title").html()||$tip.find(".popover-title").hide()},Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()},Popover.prototype.getContent=function(){var $e=this.$element,o=this.options;return $e.attr("data-content")||("function"==typeof o.content?o.content.call($e[0]):o.content)},Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},Popover.prototype.tip=function(){return this.$tip||(this.$tip=$(this.options.template)),this.$tip};var old=$.fn.popover;$.fn.popover=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.popover"),options="object"==typeof option&&option;data||$this.data("bs.popover",data=new Popover(this,options)),"string"==typeof option&&data[option]()})},$.fn.popover.Constructor=Popover,$.fn.popover.noConflict=function(){return $.fn.popover=old,this}}(jQuery),+function($){"use strict";function ScrollSpy(element,options){var href,process=$.proxy(this.process,this);this.$element=$($(element).is("body")?window:element),this.$body=$("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",process),this.options=$.extend({},ScrollSpy.DEFAULTS,options),this.selector=(this.options.target||(href=$(element).attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=$([]),this.targets=$([]),this.activeTarget=null,this.refresh(),this.process()}ScrollSpy.DEFAULTS={offset:10},ScrollSpy.prototype.refresh=function(){var offsetMethod=this.$element[0]==window?"offset":"position";this.offsets=$([]),this.targets=$([]);{var self=this;this.$body.find(this.selector).map(function(){var $el=$(this),href=$el.data("target")||$el.attr("href"),$href=/^#\w/.test(href)&&$(href);return $href&&$href.length&&[[$href[offsetMethod]().top+(!$.isWindow(self.$scrollElement.get(0))&&self.$scrollElement.scrollTop()),href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){self.offsets.push(this[0]),self.targets.push(this[1])})}},ScrollSpy.prototype.process=function(){var i,scrollTop=this.$scrollElement.scrollTop()+this.options.offset,scrollHeight=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,maxScroll=scrollHeight-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget;if(scrollTop>=maxScroll)return activeTarget!=(i=targets.last()[0])&&this.activate(i);for(i=offsets.length;i--;)activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i])},ScrollSpy.prototype.activate=function(target){this.activeTarget=target,$(this.selector).parents(".active").removeClass("active");var selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]',active=$(selector).parents("li").addClass("active");active.parent(".dropdown-menu").length&&(active=active.closest("li.dropdown").addClass("active")),active.trigger("activate")};var old=$.fn.scrollspy;$.fn.scrollspy=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.scrollspy"),options="object"==typeof option&&option;data||$this.data("bs.scrollspy",data=new ScrollSpy(this,options)),"string"==typeof option&&data[option]()})},$.fn.scrollspy.Constructor=ScrollSpy,$.fn.scrollspy.noConflict=function(){return $.fn.scrollspy=old,this},$(window).on("load",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);$spy.scrollspy($spy.data())})})}(jQuery),+function($){"use strict";var Tab=function(element){this.element=$(element)};Tab.prototype.show=function(){var $this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.data("target");if(selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),!$this.parent("li").hasClass("active")){var previous=$ul.find(".active:last a")[0],e=$.Event("show.bs.tab",{relatedTarget:previous});if($this.trigger(e),!e.isDefaultPrevented()){var $target=$(selector);this.activate($this.parent("li"),$ul),this.activate($target,$target.parent(),function(){$this.trigger({type:"shown.bs.tab",relatedTarget:previous})})}}},Tab.prototype.activate=function(element,container,callback){function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),element.addClass("active"),transition?(element[0].offsetWidth,element.addClass("in")):element.removeClass("fade"),element.parent(".dropdown-menu")&&element.closest("li.dropdown").addClass("active"),callback&&callback()}var $active=container.find("> .active"),transition=callback&&$.support.transition&&$active.hasClass("fade");transition?$active.one($.support.transition.end,next).emulateTransitionEnd(150):next(),$active.removeClass("in")};var old=$.fn.tab;$.fn.tab=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tab");data||$this.data("bs.tab",data=new Tab(this)),"string"==typeof option&&data[option]()})},$.fn.tab.Constructor=Tab,$.fn.tab.noConflict=function(){return $.fn.tab=old,this},$(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),$(this).tab("show")})}(jQuery),+function($){"use strict";var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options),this.$window=$(window).on("scroll.bs.affix.data-api",$.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",$.proxy(this.checkPositionWithEventLoop,this)),this.$element=$(element),this.affixed=this.unpin=null,this.checkPosition()};Affix.RESET="affix affix-top affix-bottom",Affix.DEFAULTS={offset:0},Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1)},Affix.prototype.checkPosition=function(){if(this.$element.is(":visible")){var scrollHeight=$(document).height(),scrollTop=this.$window.scrollTop(),position=this.$element.offset(),offset=this.options.offset,offsetTop=offset.top,offsetBottom=offset.bottom;"object"!=typeof offset&&(offsetBottom=offsetTop=offset),"function"==typeof offsetTop&&(offsetTop=offset.top()),"function"==typeof offsetBottom&&(offsetBottom=offset.bottom());var affix=null!=this.unpin&&scrollTop+this.unpin<=position.top?!1:null!=offsetBottom&&position.top+this.$element.height()>=scrollHeight-offsetBottom?"bottom":null!=offsetTop&&offsetTop>=scrollTop?"top":!1;this.affixed!==affix&&(this.unpin&&this.$element.css("top",""),this.affixed=affix,this.unpin="bottom"==affix?position.top-scrollTop:null,this.$element.removeClass(Affix.RESET).addClass("affix"+(affix?"-"+affix:"")),"bottom"==affix&&this.$element.offset({top:document.body.offsetHeight-offsetBottom-this.$element.height()}))}};var old=$.fn.affix;$.fn.affix=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.affix"),options="object"==typeof option&&option;data||$this.data("bs.affix",data=new Affix(this,options)),"string"==typeof option&&data[option]()})},$.fn.affix.Constructor=Affix,$.fn.affix.noConflict=function(){return $.fn.affix=old,this},$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this),data=$spy.data();data.offset=data.offset||{},data.offsetBottom&&(data.offset.bottom=data.offsetBottom),data.offsetTop&&(data.offset.top=data.offsetTop),$spy.affix(data)})})}(jQuery),function(factory){"function"==typeof define&&define.amd?define("picker",["jquery"],factory):this.Picker=factory(jQuery)}(function($){function PickerConstructor(ELEMENT,NAME,COMPONENT,OPTIONS){function createWrappedComponent(){return PickerConstructor._.node("div",PickerConstructor._.node("div",PickerConstructor._.node("div",PickerConstructor._.node("div",P.component.nodes(STATE.open),CLASSES.box),CLASSES.wrap),CLASSES.frame),CLASSES.holder)}function focusToOpen(event){event.stopPropagation(),"focus"==event.type&&P.$root.addClass(CLASSES.focused),P.open()}if(!ELEMENT)return PickerConstructor;var STATE={id:Math.abs(~~(1e9*Math.random()))},SETTINGS=COMPONENT?$.extend(!0,{},COMPONENT.defaults,OPTIONS):OPTIONS||{},CLASSES=$.extend({},PickerConstructor.klasses(),SETTINGS.klass),$ELEMENT=$(ELEMENT),PickerInstance=function(){return this.start()},P=PickerInstance.prototype={constructor:PickerInstance,$node:$ELEMENT,start:function(){return STATE&&STATE.start?P:(STATE.methods={},STATE.start=!0,STATE.open=!1,STATE.type=ELEMENT.type,ELEMENT.autofocus=ELEMENT==document.activeElement,ELEMENT.type="text",ELEMENT.readOnly=!SETTINGS.editable,P.component=new COMPONENT(P,SETTINGS),P.$root=$(PickerConstructor._.node("div",createWrappedComponent(),CLASSES.picker)).on({focusin:function(event){P.$root.removeClass(CLASSES.focused),event.stopPropagation()},"mousedown click":function(event){var target=event.target;target!=P.$root.children()[0]&&(event.stopPropagation(),"mousedown"!=event.type||$(target).is(":input")||"OPTION"==target.nodeName||(event.preventDefault(),ELEMENT.focus()))}}).on("click","[data-pick], [data-nav], [data-clear]",function(){var $target=$(this),targetData=$target.data(),targetDisabled=$target.hasClass(CLASSES.navDisabled)||$target.hasClass(CLASSES.disabled),activeElement=document.activeElement;activeElement=activeElement&&(activeElement.type||activeElement.href),(targetDisabled||activeElement&&!$.contains(P.$root[0],activeElement))&&ELEMENT.focus(),targetData.nav&&!targetDisabled?P.set("highlight",P.component.item.highlight,{nav:targetData.nav}):PickerConstructor._.isInteger(targetData.pick)&&!targetDisabled?P.set("select",targetData.pick).close(!0):targetData.clear&&P.clear().close(!0)}),SETTINGS.formatSubmit&&(P._hidden=$('<input type=hidden name="'+("string"==typeof SETTINGS.hiddenPrefix?SETTINGS.hiddenPrefix:"")+ELEMENT.name+("string"==typeof SETTINGS.hiddenSuffix?SETTINGS.hiddenSuffix:"_submit")+'"'+($ELEMENT.data("value")||ELEMENT.value?' value="'+PickerConstructor._.trigger(P.component.formats.toString,P.component,[SETTINGS.formatSubmit,P.component.item.select])+'"':"")+">")[0]),$ELEMENT.data(NAME,P).addClass(CLASSES.input).val($ELEMENT.data("value")?PickerConstructor._.trigger(P.component.formats.toString,P.component,[SETTINGS.format,P.component.item.select]):ELEMENT.value).after(P._hidden).on("focus.P"+STATE.id+" click.P"+STATE.id,focusToOpen).on("change.P"+STATE.id,function(){P._hidden&&(P._hidden.value=ELEMENT.value?PickerConstructor._.trigger(P.component.formats.toString,P.component,[SETTINGS.formatSubmit,P.component.item.select]):"")}),SETTINGS.editable||$ELEMENT.on("keydown.P"+STATE.id,function(event){var keycode=event.keyCode,isKeycodeDelete=/^(8|46)$/.test(keycode);return 27==keycode?(P.close(),!1):void((32==keycode||isKeycodeDelete||!STATE.open&&P.component.key[keycode])&&(event.preventDefault(),event.stopPropagation(),isKeycodeDelete?P.clear().close():P.open()))}),SETTINGS.container?$(SETTINGS.container).append(P.$root):$ELEMENT.after(P.$root),P.on({start:P.component.onStart,render:P.component.onRender,stop:P.component.onStop,open:P.component.onOpen,close:P.component.onClose,set:P.component.onSet}).on({start:SETTINGS.onStart,render:SETTINGS.onRender,stop:SETTINGS.onStop,open:SETTINGS.onOpen,close:SETTINGS.onClose,set:SETTINGS.onSet}),ELEMENT.autofocus&&P.open(),P.trigger("start").trigger("render"))},render:function(entireComponent){return entireComponent?P.$root.html(createWrappedComponent()):P.$root.find("."+CLASSES.box).html(P.component.nodes(STATE.open)),P.trigger("render")},stop:function(){return STATE.start?(P.close(),P._hidden&&P._hidden.parentNode.removeChild(P._hidden),P.$root.remove(),$ELEMENT.removeClass(CLASSES.input).removeData(NAME),setTimeout(function(){$ELEMENT.off(".P"+STATE.id)},0),ELEMENT.type=STATE.type,ELEMENT.readOnly=!1,P.trigger("stop"),STATE.methods={},STATE.start=!1,P):P},open:function(dontGiveFocus){return STATE.open?P:($ELEMENT.addClass(CLASSES.active),P.$root.addClass(CLASSES.opened),dontGiveFocus!==!1&&(STATE.open=!0,$ELEMENT.trigger("focus"),$document.on("click.P"+STATE.id+" focusin.P"+STATE.id,function(event){var target=event.target;target!=ELEMENT&&target!=document&&P.close(target===P.$root.children()[0])}).on("keydown.P"+STATE.id,function(event){var keycode=event.keyCode,keycodeToMove=P.component.key[keycode],target=event.target;27==keycode?P.close(!0):target!=ELEMENT||!keycodeToMove&&13!=keycode?$.contains(P.$root[0],target)&&13==keycode&&(event.preventDefault(),target.click()):(event.preventDefault(),keycodeToMove?PickerConstructor._.trigger(P.component.key.go,P,[PickerConstructor._.trigger(keycodeToMove)]):P.$root.find("."+CLASSES.highlighted).hasClass(CLASSES.disabled)||P.set("select",P.component.item.highlight).close())})),P.trigger("open"))},close:function(giveFocus){return giveFocus&&($ELEMENT.off("focus.P"+STATE.id).trigger("focus"),setTimeout(function(){$ELEMENT.on("focus.P"+STATE.id,focusToOpen)},0)),$ELEMENT.removeClass(CLASSES.active),P.$root.removeClass(CLASSES.opened+" "+CLASSES.focused),STATE.open?(STATE.open=!1,$document.off(".P"+STATE.id),P.trigger("close")):P},clear:function(){return P.set("clear")},set:function(thing,value,options){var thingItem,thingValue,thingIsObject=$.isPlainObject(thing),thingObject=thingIsObject?thing:{};if(options=thingIsObject&&$.isPlainObject(value)?value:options||{},thing){thingIsObject||(thingObject[thing]=value);
for(thingItem in thingObject)thingValue=thingObject[thingItem],P.component.item[thingItem]&&P.component.set(thingItem,thingValue,options),("select"==thingItem||"clear"==thingItem)&&$ELEMENT.val("clear"==thingItem?"":PickerConstructor._.trigger(P.component.formats.toString,P.component,[SETTINGS.format,P.component.get(thingItem)])).trigger("change");P.render()}return options.muted?P:P.trigger("set",thingObject)},get:function(thing,format){return thing=thing||"value",null!=STATE[thing]?STATE[thing]:"value"==thing?ELEMENT.value:P.component.item[thing]?"string"==typeof format?PickerConstructor._.trigger(P.component.formats.toString,P.component,[format,P.component.get(thing)]):P.component.get(thing):void 0},on:function(thing,method){var thingName,thingMethod,thingIsObject=$.isPlainObject(thing),thingObject=thingIsObject?thing:{};if(thing){thingIsObject||(thingObject[thing]=method);for(thingName in thingObject)thingMethod=thingObject[thingName],STATE.methods[thingName]=STATE.methods[thingName]||[],STATE.methods[thingName].push(thingMethod)}return P},trigger:function(name,data){var methodList=STATE.methods[name];return methodList&&methodList.map(function(method){PickerConstructor._.trigger(method,P,[data])}),P}};return new PickerInstance}var $document=$(document);return PickerConstructor.klasses=function(prefix){return prefix=prefix||"picker",{picker:prefix,opened:prefix+"--opened",focused:prefix+"--focused",input:prefix+"__input",active:prefix+"__input--active",holder:prefix+"__holder",frame:prefix+"__frame",wrap:prefix+"__wrap",box:prefix+"__box"}},PickerConstructor._={group:function(groupObject){for(var loopObjectScope,nodesList="",counter=PickerConstructor._.trigger(groupObject.min,groupObject);counter<=PickerConstructor._.trigger(groupObject.max,groupObject,[counter]);counter+=groupObject.i)loopObjectScope=PickerConstructor._.trigger(groupObject.item,groupObject,[counter]),nodesList+=PickerConstructor._.node(groupObject.node,loopObjectScope[0],loopObjectScope[1],loopObjectScope[2]);return nodesList},node:function(wrapper,item,klass,attribute){return item?(item=$.isArray(item)?item.join(""):item,klass=klass?' class="'+klass+'"':"",attribute=attribute?" "+attribute:"","<"+wrapper+klass+attribute+">"+item+"</"+wrapper+">"):""},lead:function(number){return(10>number?"0":"")+number},trigger:function(callback,scope,args){return"function"==typeof callback?callback.apply(scope,args||[]):callback},digits:function(string){return/\d/.test(string[1])?2:1},isDate:function(value){return{}.toString.call(value).indexOf("Date")>-1&&this.isInteger(value.getDate())},isInteger:function(value){return{}.toString.call(value).indexOf("Number")>-1&&value%1===0}},PickerConstructor.extend=function(name,Component){$.fn[name]=function(options,action){var componentData=this.data(name);return"picker"==options?componentData:componentData&&"string"==typeof options?(PickerConstructor._.trigger(componentData[options],componentData,[action]),this):this.each(function(){var $this=$(this);$this.data(name)||new PickerConstructor(this,name,Component,options)})},$.fn[name].defaults=Component.defaults},PickerConstructor}),function(factory){"function"==typeof define&&define.amd?define(["picker","jquery"],factory):factory(Picker,jQuery)}(function(Picker,$){function DatePicker(picker,settings){var calendar=this,elementValue=picker.$node[0].value,elementDataValue=picker.$node.data("value"),valueString=elementDataValue||elementValue,formatString=elementDataValue?settings.formatSubmit:settings.format,isRTL=function(){return"rtl"===getComputedStyle(picker.$root[0]).direction};calendar.settings=settings,calendar.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"navigate create validate",view:"create validate viewset",disable:"flipItem",enable:"flipItem"},calendar.item={},calendar.item.disable=(settings.disable||[]).slice(0),calendar.item.enable=-function(collectionDisabled){return collectionDisabled[0]===!0?collectionDisabled.shift():-1}(calendar.item.disable),calendar.set("min",settings.min).set("max",settings.max).set("now").set("select",valueString||calendar.item.now,{format:formatString,data:function(formatArray){return valueString&&(formatArray.indexOf("mm")>-1||formatArray.indexOf("m")>-1)}(calendar.formats.toArray(formatString))}),calendar.key={40:7,38:-7,39:function(){return isRTL()?-1:1},37:function(){return isRTL()?1:-1},go:function(timeChange){calendar.set("highlight",[calendar.item.highlight.year,calendar.item.highlight.month,calendar.item.highlight.date+timeChange],{interval:timeChange}),this.render()}},picker.on("render",function(){picker.$root.find("."+settings.klass.selectMonth).on("change",function(){picker.set("highlight",[picker.get("view").year,this.value,picker.get("highlight").date]),picker.$root.find("."+settings.klass.selectMonth).trigger("focus")}),picker.$root.find("."+settings.klass.selectYear).on("change",function(){picker.set("highlight",[this.value,picker.get("view").month,picker.get("highlight").date]),picker.$root.find("."+settings.klass.selectYear).trigger("focus")})}).on("open",function(){picker.$root.find("button, select").attr("disabled",!1)}).on("close",function(){picker.$root.find("button, select").attr("disabled",!0)})}var DAYS_IN_WEEK=7,WEEKS_IN_CALENDAR=6;DatePicker.prototype.set=function(type,value,options){var calendar=this;return calendar.item["enable"==type?"disable":"flip"==type?"enable":type]=calendar.queue[type].split(" ").map(function(method){return value=calendar[method](type,value,options)}).pop(),"select"==type?calendar.set("highlight",calendar.item.select,options):"highlight"==type?calendar.set("view",calendar.item.highlight,options):("flip"==type||"min"==type||"max"==type||"disable"==type||"enable"==type)&&calendar.item.select&&calendar.item.highlight&&calendar.set("select",calendar.item.select,options).set("highlight",calendar.item.highlight,options),calendar},DatePicker.prototype.get=function(type){return this.item[type]},DatePicker.prototype.create=function(type,value,options){var isInfiniteValue,calendar=this;return value=void 0===value?type:value,value==-1/0||1/0==value?isInfiniteValue=value:$.isPlainObject(value)&&Picker._.isInteger(value.pick)?value=value.obj:$.isArray(value)?(value=new Date(value[0],value[1],value[2]),value=Picker._.isDate(value)?value:calendar.create().obj):value=Picker._.isInteger(value)||Picker._.isDate(value)?calendar.normalize(new Date(value),options):calendar.now(type,value,options),{year:isInfiniteValue||value.getFullYear(),month:isInfiniteValue||value.getMonth(),date:isInfiniteValue||value.getDate(),day:isInfiniteValue||value.getDay(),obj:isInfiniteValue||value,pick:isInfiniteValue||value.getTime()}},DatePicker.prototype.now=function(type,value,options){return value=new Date,options&&options.rel&&value.setDate(value.getDate()+options.rel),this.normalize(value,options)},DatePicker.prototype.navigate=function(type,value,options){if($.isPlainObject(value)){for(var targetDateObject=new Date(value.year,value.month+(options&&options.nav?options.nav:0),1),year=targetDateObject.getFullYear(),month=targetDateObject.getMonth(),date=value.date;Picker._.isDate(targetDateObject)&&new Date(year,month,date).getMonth()!==month;)date-=1;value=[year,month,date]}return value},DatePicker.prototype.normalize=function(value){return value.setHours(0,0,0,0),value},DatePicker.prototype.measure=function(type,value){var calendar=this;return value?Picker._.isInteger(value)&&(value=calendar.now(type,value,{rel:value})):value="min"==type?-1/0:1/0,value},DatePicker.prototype.viewset=function(type,dateObject){return this.create([dateObject.year,dateObject.month,1])},DatePicker.prototype.validate=function(type,dateObject,options){var hasEnabledBeforeTarget,hasEnabledAfterTarget,reachedMin,reachedMax,calendar=this,originalDateObject=dateObject,interval=options&&options.interval?options.interval:1,isFlippedBase=-1===calendar.item.enable,minLimitObject=calendar.item.min,maxLimitObject=calendar.item.max,hasEnabledWeekdays=isFlippedBase&&calendar.item.disable.filter(function(value){if($.isArray(value)){var dateTime=calendar.create(value).pick;dateTime<dateObject.pick?hasEnabledBeforeTarget=!0:dateTime>dateObject.pick&&(hasEnabledAfterTarget=!0)}return Picker._.isInteger(value)}).length;if(!options.nav&&(!isFlippedBase&&calendar.disabled(dateObject)||isFlippedBase&&calendar.disabled(dateObject)&&(hasEnabledWeekdays||hasEnabledBeforeTarget||hasEnabledAfterTarget)||dateObject.pick<=minLimitObject.pick||dateObject.pick>=maxLimitObject.pick))for(isFlippedBase&&!hasEnabledWeekdays&&(!hasEnabledAfterTarget&&interval>0||!hasEnabledBeforeTarget&&0>interval)&&(interval*=-1);calendar.disabled(dateObject)&&(Math.abs(interval)>1&&(dateObject.month<originalDateObject.month||dateObject.month>originalDateObject.month)&&(dateObject=originalDateObject,interval=Math.abs(interval)/interval),dateObject.pick<=minLimitObject.pick?(reachedMin=!0,interval=1):dateObject.pick>=maxLimitObject.pick&&(reachedMax=!0,interval=-1),!reachedMin||!reachedMax);)dateObject=calendar.create([dateObject.year,dateObject.month,dateObject.date+interval]);return dateObject},DatePicker.prototype.disabled=function(dateObject){var calendar=this,isDisabledMatch=calendar.item.disable.filter(function(dateToDisable){return Picker._.isInteger(dateToDisable)?dateObject.day===(calendar.settings.firstDay?dateToDisable:dateToDisable-1)%7:$.isArray(dateToDisable)||Picker._.isDate(dateToDisable)?dateObject.pick===calendar.create(dateToDisable).pick:void 0});return isDisabledMatch=isDisabledMatch.length&&!isDisabledMatch.filter(function(dateToDisable){return $.isArray(dateToDisable)&&"inverted"==dateToDisable[3]}).length,-1===calendar.item.enable?!isDisabledMatch:isDisabledMatch||dateObject.pick<calendar.item.min.pick||dateObject.pick>calendar.item.max.pick},DatePicker.prototype.parse=function(type,value,options){var calendar=this,parsingObject={};if(!value||Picker._.isInteger(value)||$.isArray(value)||Picker._.isDate(value)||$.isPlainObject(value)&&Picker._.isInteger(value.pick))return value;if(!options||!options.format)throw"Need a formatting option to parse this..";return calendar.formats.toArray(options.format).map(function(label){var formattingLabel=calendar.formats[label],formatLength=formattingLabel?Picker._.trigger(formattingLabel,calendar,[value,parsingObject]):label.replace(/^!/,"").length;formattingLabel&&(parsingObject[label]=value.substr(0,formatLength)),value=value.substr(formatLength)}),[parsingObject.yyyy||parsingObject.yy,+(parsingObject.mm||parsingObject.m)-(options.data?1:0),parsingObject.dd||parsingObject.d]},DatePicker.prototype.formats=function(){function getWordLengthFromCollection(string,collection,dateObject){var word=string.match(/\w+/)[0];return dateObject.mm||dateObject.m||(dateObject.m=collection.indexOf(word)),word.length}function getFirstWordLength(string){return string.match(/\w+/)[0].length}return{d:function(string,dateObject){return string?Picker._.digits(string):dateObject.date},dd:function(string,dateObject){return string?2:Picker._.lead(dateObject.date)},ddd:function(string,dateObject){return string?getFirstWordLength(string):this.settings.weekdaysShort[dateObject.day]},dddd:function(string,dateObject){return string?getFirstWordLength(string):this.settings.weekdaysFull[dateObject.day]},m:function(string,dateObject){return string?Picker._.digits(string):dateObject.month+1},mm:function(string,dateObject){return string?2:Picker._.lead(dateObject.month+1)},mmm:function(string,dateObject){var collection=this.settings.monthsShort;return string?getWordLengthFromCollection(string,collection,dateObject):collection[dateObject.month]},mmmm:function(string,dateObject){var collection=this.settings.monthsFull;return string?getWordLengthFromCollection(string,collection,dateObject):collection[dateObject.month]},yy:function(string,dateObject){return string?2:(""+dateObject.year).slice(2)},yyyy:function(string,dateObject){return string?4:dateObject.year},toArray:function(formatString){return formatString.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(formatString,itemObject){var calendar=this;return calendar.formats.toArray(formatString).map(function(label){return Picker._.trigger(calendar.formats[label],calendar,[0,itemObject])||label.replace(/^!/,"")}).join("")}}}(),DatePicker.prototype.flipItem=function(type,value){var calendar=this,collection=calendar.item.disable,isFlippedBase=-1===calendar.item.enable;return"flip"==value?calendar.item.enable=isFlippedBase?1:-1:"enable"==type&&value===!0||"disable"==type&&value===!1?(calendar.item.enable=1,collection=[]):"enable"==type&&value===!1||"disable"==type&&value===!0?(calendar.item.enable=-1,collection=[]):$.isArray(value)&&(isFlippedBase&&"enable"==type||!isFlippedBase&&"disable"==type?collection=calendar.addDisabled(collection,value):isFlippedBase||"enable"!=type?isFlippedBase&&"disable"==type&&(collection=calendar.removeDisabled(collection,value)):collection=calendar.addEnabled(collection,value)),collection},DatePicker.prototype.addEnabled=function(collection,item){var calendar=this;return item.map(function(timeUnit){calendar.filterDisabled(collection,timeUnit,1).length&&(collection=calendar.removeDisabled(collection,[timeUnit]),$.isArray(timeUnit)&&collection.filter(function(disabledDate){return Picker._.isInteger(disabledDate)&&calendar.create(timeUnit).day===disabledDate-1}).length&&(timeUnit=timeUnit.slice(0),timeUnit.push("inverted"),collection.push(timeUnit)))}),collection},DatePicker.prototype.addDisabled=function(collection,item){var calendar=this;return item.map(function(timeUnit){calendar.filterDisabled(collection,timeUnit).length?$.isArray(timeUnit)&&calendar.filterDisabled(collection,timeUnit,1).length&&(collection=calendar.removeDisabled(collection,[timeUnit])):collection.push(timeUnit)}),collection},DatePicker.prototype.removeDisabled=function(collection,item){var calendar=this;return item.map(function(timeUnit){collection=calendar.filterDisabled(collection,timeUnit,1)}),collection},DatePicker.prototype.filterDisabled=function(collection,timeUnit,isRemoving){var calendar=this,timeIsObject=$.isArray(timeUnit)||Picker._.isDate(timeUnit),timeObjectValue=timeIsObject&&calendar.create(timeUnit).pick;return collection.filter(function(disabledTimeUnit){var isMatch=timeIsObject&&($.isArray(disabledTimeUnit)||Picker._.isDate(disabledTimeUnit))?timeObjectValue===calendar.create(disabledTimeUnit).pick:timeUnit===disabledTimeUnit;return isRemoving?!isMatch:isMatch})},DatePicker.prototype.nodes=function(isOpen){var calendar=this,settings=calendar.settings,nowObject=calendar.item.now,selectedObject=calendar.item.select,highlightedObject=calendar.item.highlight,viewsetObject=calendar.item.view,disabledCollection=calendar.item.disable,minLimitObject=calendar.item.min,maxLimitObject=calendar.item.max,tableHead=function(collection){return settings.firstDay&&collection.push(collection.shift()),Picker._.node("thead",Picker._.group({min:0,max:DAYS_IN_WEEK-1,i:1,node:"th",item:function(counter){return[collection[counter],settings.klass.weekdays]}}))}((settings.showWeekdaysFull?settings.weekdaysFull:settings.weekdaysShort).slice(0)),createMonthNav=function(next){return Picker._.node("div"," ",settings.klass["nav"+(next?"Next":"Prev")]+(next&&viewsetObject.year>=maxLimitObject.year&&viewsetObject.month>=maxLimitObject.month||!next&&viewsetObject.year<=minLimitObject.year&&viewsetObject.month<=minLimitObject.month?" "+settings.klass.navDisabled:""),"data-nav="+(next||-1))},createMonthLabel=function(monthsCollection){return settings.selectMonths?Picker._.node("select",Picker._.group({min:0,max:11,i:1,node:"option",item:function(loopedMonth){return[monthsCollection[loopedMonth],0,"value="+loopedMonth+(viewsetObject.month==loopedMonth?" selected":"")+(viewsetObject.year==minLimitObject.year&&loopedMonth<minLimitObject.month||viewsetObject.year==maxLimitObject.year&&loopedMonth>maxLimitObject.month?" disabled":"")]}}),settings.klass.selectMonth,isOpen?"":"disabled"):Picker._.node("div",monthsCollection[viewsetObject.month],settings.klass.month)},createYearLabel=function(){var focusedYear=viewsetObject.year,numberYears=settings.selectYears===!0?5:~~(settings.selectYears/2);if(numberYears){var minYear=minLimitObject.year,maxYear=maxLimitObject.year,lowestYear=focusedYear-numberYears,highestYear=focusedYear+numberYears;if(minYear>lowestYear&&(highestYear+=minYear-lowestYear,lowestYear=minYear),highestYear>maxYear){var availableYears=lowestYear-minYear,neededYears=highestYear-maxYear;lowestYear-=availableYears>neededYears?neededYears:availableYears,highestYear=maxYear}return Picker._.node("select",Picker._.group({min:lowestYear,max:highestYear,i:1,node:"option",item:function(loopedYear){return[loopedYear,0,"value="+loopedYear+(focusedYear==loopedYear?" selected":"")]}}),settings.klass.selectYear,isOpen?"":"disabled")}return Picker._.node("div",focusedYear,settings.klass.year)};return Picker._.node("div",createMonthNav()+createMonthNav(1)+createMonthLabel(settings.showMonthsShort?settings.monthsShort:settings.monthsFull)+createYearLabel(),settings.klass.header)+Picker._.node("table",tableHead+Picker._.node("tbody",Picker._.group({min:0,max:WEEKS_IN_CALENDAR-1,i:1,node:"tr",item:function(rowCounter){var shiftDateBy=settings.firstDay&&0===calendar.create([viewsetObject.year,viewsetObject.month,1]).day?-7:0;return[Picker._.group({min:DAYS_IN_WEEK*rowCounter-viewsetObject.day+shiftDateBy+1,max:function(){return this.min+DAYS_IN_WEEK-1},i:1,node:"td",item:function(targetDate){return targetDate=calendar.create([viewsetObject.year,viewsetObject.month,targetDate+(settings.firstDay?1:0)]),[Picker._.node("div",targetDate.date,function(klasses){return klasses.push(viewsetObject.month==targetDate.month?settings.klass.infocus:settings.klass.outfocus),nowObject.pick==targetDate.pick&&klasses.push(settings.klass.now),selectedObject&&selectedObject.pick==targetDate.pick&&klasses.push(settings.klass.selected),highlightedObject&&highlightedObject.pick==targetDate.pick&&klasses.push(settings.klass.highlighted),(disabledCollection&&calendar.disabled(targetDate)||targetDate.pick<minLimitObject.pick||targetDate.pick>maxLimitObject.pick)&&klasses.push(settings.klass.disabled),klasses.join(" ")}([settings.klass.day]),"data-pick="+targetDate.pick)]}})]}})),settings.klass.table)+Picker._.node("div",Picker._.node("button",settings.today,settings.klass.buttonToday,"type=button data-pick="+nowObject.pick+(isOpen?"":" disabled"))+Picker._.node("button",settings.clear,settings.klass.buttonClear,"type=button data-clear=1"+(isOpen?"":" disabled")),settings.klass.footer)},DatePicker.defaults=function(prefix){return{monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",format:"d mmmm, yyyy",klass:{table:prefix+"table",header:prefix+"header",navPrev:prefix+"nav--prev",navNext:prefix+"nav--next",navDisabled:prefix+"nav--disabled",month:prefix+"month",year:prefix+"year",selectMonth:prefix+"select--month",selectYear:prefix+"select--year",weekdays:prefix+"weekday",day:prefix+"day",disabled:prefix+"day--disabled",selected:prefix+"day--selected",highlighted:prefix+"day--highlighted",now:prefix+"day--today",infocus:prefix+"day--infocus",outfocus:prefix+"day--outfocus",footer:prefix+"footer",buttonClear:prefix+"button--clear",buttonToday:prefix+"button--today"}}}(Picker.klasses().picker+"__"),Picker.extend("pickadate",DatePicker)}),function(factory){"function"==typeof define&&define.amd?define(["picker","jquery"],factory):factory(Picker,jQuery)}(function(Picker,$){function TimePicker(picker,settings){var clock=this,elementDataValue=picker.$node.data("value");clock.settings=settings,clock.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"create validate",view:"create validate",disable:"flipItem",enable:"flipItem"},clock.item={},clock.item.interval=settings.interval||30,clock.item.disable=(settings.disable||[]).slice(0),clock.item.enable=-function(collectionDisabled){return collectionDisabled[0]===!0?collectionDisabled.shift():-1}(clock.item.disable),clock.set("min",settings.min).set("max",settings.max).set("now").set("select",elementDataValue||picker.$node[0].value||clock.item.min,{format:elementDataValue?settings.formatSubmit:settings.format}),clock.key={40:1,38:-1,39:1,37:-1,go:function(timeChange){clock.set("highlight",clock.item.highlight.pick+timeChange*clock.item.interval,{interval:timeChange*clock.item.interval}),this.render()}},picker.on("render",function(){var $pickerHolder=picker.$root.children(),$viewset=$pickerHolder.find("."+settings.klass.viewset);$viewset.length&&($pickerHolder[0].scrollTop=~~$viewset.position().top-2*$viewset[0].clientHeight)}).on("open",function(){picker.$root.find("button").attr("disable",!1)}).on("close",function(){picker.$root.find("button").attr("disable",!0)})}var HOURS_IN_DAY=24,MINUTES_IN_HOUR=60,HOURS_TO_NOON=12,MINUTES_IN_DAY=HOURS_IN_DAY*MINUTES_IN_HOUR;TimePicker.prototype.set=function(type,value,options){var clock=this;return clock.item["enable"==type?"disable":"flip"==type?"enable":type]=clock.queue[type].split(" ").map(function(method){return value=clock[method](type,value,options)}).pop(),"select"==type?clock.set("highlight",clock.item.select,options):"highlight"==type?clock.set("view",clock.item.highlight,options):"interval"==type?clock.set("min",clock.item.min,options).set("max",clock.item.max,options):("flip"==type||"min"==type||"max"==type||"disable"==type||"enable"==type)&&clock.item.select&&clock.item.highlight&&("min"==type&&clock.set("max",clock.item.max,options),clock.set("select",clock.item.select,options).set("highlight",clock.item.highlight,options)),clock},TimePicker.prototype.get=function(type){return this.item[type]},TimePicker.prototype.create=function(type,value,options){var clock=this;return value=void 0===value?type:value,Picker._.isDate(value)&&(value=[value.getHours(),value.getMinutes()]),$.isPlainObject(value)&&Picker._.isInteger(value.pick)?value=value.pick:$.isArray(value)?value=+value[0]*MINUTES_IN_HOUR+ +value[1]:Picker._.isInteger(value)||(value=clock.now(type,value,options)),"max"==type&&value<clock.item.min.pick&&(value+=MINUTES_IN_DAY),"min"!=type&&"max"!=type&&(value-clock.item.min.pick)%clock.item.interval!==0&&(value+=clock.item.interval),value=clock.normalize(type,value,options),{hour:~~(HOURS_IN_DAY+value/MINUTES_IN_HOUR)%HOURS_IN_DAY,mins:(MINUTES_IN_HOUR+value%MINUTES_IN_HOUR)%MINUTES_IN_HOUR,time:(MINUTES_IN_DAY+value)%MINUTES_IN_DAY,pick:value}},TimePicker.prototype.now=function(type,value){var date=new Date,dateMinutes=date.getHours()*MINUTES_IN_HOUR+date.getMinutes();return dateMinutes-=dateMinutes%this.item.interval,Picker._.isInteger(value)?value+="min"==type&&0>value&&0===dateMinutes?2:1:value=1,value*this.item.interval+dateMinutes},TimePicker.prototype.normalize=function(type,value){var interval=this.item.interval,difference="min"==type?0:(value-this.item.min.pick)%interval;return value-(difference+(0>value?interval:0))},TimePicker.prototype.measure=function(type,value,options){var clock=this;return value?value===!0||Picker._.isInteger(value)?value=clock.now(type,value,options):$.isPlainObject(value)&&Picker._.isInteger(value.pick)&&(value=clock.normalize(type,value.pick,options)):value="min"==type?[0,0]:[HOURS_IN_DAY-1,MINUTES_IN_HOUR-1],value},TimePicker.prototype.validate=function(type,timeObject,options){var clock=this,interval=options&&options.interval?options.interval:clock.item.interval;return clock.disabled(timeObject)&&(timeObject=clock.shift(timeObject,interval)),timeObject=clock.scope(timeObject),clock.disabled(timeObject)&&(timeObject=clock.shift(timeObject,-1*interval)),timeObject},TimePicker.prototype.disabled=function(timeObject){var clock=this,isDisabledMatch=clock.item.disable.filter(function(timeToDisable){return Picker._.isInteger(timeToDisable)?timeObject.hour==timeToDisable:$.isArray(timeToDisable)||Picker._.isDate(timeToDisable)?timeObject.pick==clock.create(timeToDisable).pick:void 0});return isDisabledMatch=isDisabledMatch.length&&!isDisabledMatch.filter(function(timeToDisable){return $.isArray(timeToDisable)&&"inverted"==timeToDisable[2]}).length,-1===clock.item.enable?!isDisabledMatch:isDisabledMatch||timeObject.pick<clock.item.min.pick||timeObject.pick>clock.item.max.pick},TimePicker.prototype.shift=function(timeObject,interval){var clock=this,minLimit=clock.item.min.pick,maxLimit=clock.item.max.pick;for(interval=interval||clock.item.interval;clock.disabled(timeObject)&&(timeObject=clock.create(timeObject.pick+=interval),!(timeObject.pick<=minLimit||timeObject.pick>=maxLimit)););return timeObject},TimePicker.prototype.scope=function(timeObject){var minLimit=this.item.min.pick,maxLimit=this.item.max.pick;return this.create(timeObject.pick>maxLimit?maxLimit:timeObject.pick<minLimit?minLimit:timeObject)},TimePicker.prototype.parse=function(type,value,options){var clock=this,parsingObject={};if(!value||Picker._.isInteger(value)||$.isArray(value)||Picker._.isDate(value)||$.isPlainObject(value)&&Picker._.isInteger(value.pick))return value;if(!options||!options.format)throw"Need a formatting option to parse this..";return clock.formats.toArray(options.format).map(function(label){var formattingLabel=clock.formats[label],formatLength=formattingLabel?Picker._.trigger(formattingLabel,clock,[value,parsingObject]):label.replace(/^!/,"").length;formattingLabel&&(parsingObject[label]=value.substr(0,formatLength)),value=value.substr(formatLength)}),+parsingObject.i+MINUTES_IN_HOUR*(+(parsingObject.H||parsingObject.HH)||+(parsingObject.h||parsingObject.hh)%12+(/^p/i.test(parsingObject.A||parsingObject.a)?12:0))},TimePicker.prototype.formats={h:function(string,timeObject){return string?Picker._.digits(string):timeObject.hour%HOURS_TO_NOON||HOURS_TO_NOON},hh:function(string,timeObject){return string?2:Picker._.lead(timeObject.hour%HOURS_TO_NOON||HOURS_TO_NOON)},H:function(string,timeObject){return string?Picker._.digits(string):""+timeObject.hour%24},HH:function(string,timeObject){return string?Picker._.digits(string):Picker._.lead(timeObject.hour%24)},i:function(string,timeObject){return string?2:Picker._.lead(timeObject.mins)},a:function(string,timeObject){return string?4:MINUTES_IN_DAY/2>timeObject.time%MINUTES_IN_DAY?"a.m.":"p.m."},A:function(string,timeObject){return string?2:MINUTES_IN_DAY/2>timeObject.time%MINUTES_IN_DAY?"AM":"PM"},toArray:function(formatString){return formatString.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(formatString,itemObject){var clock=this;return clock.formats.toArray(formatString).map(function(label){return Picker._.trigger(clock.formats[label],clock,[0,itemObject])||label.replace(/^!/,"")}).join("")}},TimePicker.prototype.flipItem=function(type,value){var clock=this,collection=clock.item.disable,isFlippedBase=-1===clock.item.enable;return"flip"==value?clock.item.enable=isFlippedBase?1:-1:"enable"==type&&value===!0||"disable"==type&&value===!1?(clock.item.enable=1,collection=[]):"enable"==type&&value===!1||"disable"==type&&value===!0?(clock.item.enable=-1,collection=[]):$.isArray(value)&&(isFlippedBase&&"enable"==type||!isFlippedBase&&"disable"==type?collection=clock.addDisabled(collection,value):isFlippedBase||"enable"!=type?isFlippedBase&&"disable"==type&&(collection=clock.removeDisabled(collection,value)):collection=clock.addEnabled(collection,value)),collection},TimePicker.prototype.addEnabled=function(collection,item){var clock=this;return item.map(function(timeUnit){clock.filterDisabled(collection,timeUnit,1).length&&(collection=clock.removeDisabled(collection,[timeUnit]),$.isArray(timeUnit)&&collection.filter(function(disabledHour){return Picker._.isInteger(disabledHour)&&clock.create(timeUnit).hour===disabledHour}).length&&(timeUnit=timeUnit.slice(0),timeUnit.push("inverted"),collection.push(timeUnit)))}),collection},TimePicker.prototype.addDisabled=function(collection,item){var clock=this;return item.map(function(timeUnit){clock.filterDisabled(collection,timeUnit).length?$.isArray(timeUnit)&&clock.filterDisabled(collection,timeUnit,1).length&&(collection=clock.removeDisabled(collection,[timeUnit])):collection.push(timeUnit)}),collection},TimePicker.prototype.removeDisabled=function(collection,item){var clock=this;return item.map(function(timeUnit){collection=clock.filterDisabled(collection,timeUnit,1)}),collection},TimePicker.prototype.filterDisabled=function(collection,timeUnit,isRemoving){var timeIsArray=$.isArray(timeUnit);return collection.filter(function(disabledTimeUnit){var isMatch=!timeIsArray&&timeUnit===disabledTimeUnit||timeIsArray&&$.isArray(disabledTimeUnit)&&timeUnit.toString()===disabledTimeUnit.toString();return isRemoving?!isMatch:isMatch})},TimePicker.prototype.i=function(type,value){return Picker._.isInteger(value)&&value>0?value:this.item.interval},TimePicker.prototype.nodes=function(isOpen){var clock=this,settings=clock.settings,selectedObject=clock.item.select,highlightedObject=clock.item.highlight,viewsetObject=clock.item.view,disabledCollection=clock.item.disable;return Picker._.node("ul",Picker._.group({min:clock.item.min.pick,max:clock.item.max.pick,i:clock.item.interval,node:"li",item:function(loopedTime){return loopedTime=clock.create(loopedTime),[Picker._.trigger(clock.formats.toString,clock,[Picker._.trigger(settings.formatLabel,clock,[loopedTime])||settings.format,loopedTime]),function(klasses,timeMinutes){return selectedObject&&selectedObject.pick==timeMinutes&&klasses.push(settings.klass.selected),highlightedObject&&highlightedObject.pick==timeMinutes&&klasses.push(settings.klass.highlighted),viewsetObject&&viewsetObject.pick==timeMinutes&&klasses.push(settings.klass.viewset),disabledCollection&&clock.disabled(loopedTime)&&klasses.push(settings.klass.disabled),klasses.join(" ")}([settings.klass.listItem],loopedTime.pick),"data-pick="+loopedTime.pick]}})+Picker._.node("li",Picker._.node("button",settings.clear,settings.klass.buttonClear,"type=button data-clear=1"+(isOpen?"":" disable"))),settings.klass.list)},TimePicker.defaults=function(prefix){return{clear:"Clear",format:"h:i A",interval:30,klass:{picker:prefix+" "+prefix+"--time",holder:prefix+"__holder",list:prefix+"__list",listItem:prefix+"__list-item",disabled:prefix+"__list-item--disabled",selected:prefix+"__list-item--selected",highlighted:prefix+"__list-item--highlighted",viewset:prefix+"__list-item--viewset",now:prefix+"__list-item--now",buttonClear:prefix+"__button--clear"}}}(Picker.klasses().picker),Picker.extend("pickatime",TimePicker)}),function(a){function b(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(a,b){return function(c){return k(a.call(this,c),b)}}function d(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function e(){}function f(a){w(a),h(this,a)}function g(a){var b=q(a),c=b.year||0,d=b.month||0,e=b.week||0,f=b.day||0,g=b.hour||0,h=b.minute||0,i=b.second||0,j=b.millisecond||0;this._milliseconds=+j+1e3*i+6e4*h+36e5*g,this._days=+f+7*e,this._months=+d+12*c,this._data={},this._bubble()}function h(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function i(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&qb.hasOwnProperty(b)&&(c[b]=a[b]);return c}function j(a){return 0>a?Math.ceil(a):Math.floor(a)}function k(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function l(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&db.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f))
}function m(a){return"[object Array]"===Object.prototype.toString.call(a)}function n(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function o(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&s(a[d])!==s(b[d]))&&g++;return g+f}function p(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Tb[a]||Ub[b]||b}return a}function q(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=p(c),b&&(d[b]=a[c]));return d}function r(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}db[b]=function(e,f){var g,h,i=db.fn._lang[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=db().utc().set(d,a);return i.call(db.fn._lang,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function s(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function t(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function u(a){return v(a)?366:365}function v(a){return a%4===0&&a%100!==0||a%400===0}function w(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[jb]<0||a._a[jb]>11?jb:a._a[kb]<1||a._a[kb]>t(a._a[ib],a._a[jb])?kb:a._a[lb]<0||a._a[lb]>23?lb:a._a[mb]<0||a._a[mb]>59?mb:a._a[nb]<0||a._a[nb]>59?nb:a._a[ob]<0||a._a[ob]>999?ob:-1,a._pf._overflowDayOfYear&&(ib>b||b>kb)&&(b=kb),a._pf.overflow=b)}function x(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function y(a){return a?a.toLowerCase().replace("_","-"):a}function z(a,b){return b._isUTC?db(a).zone(b._offset||0):db(a).local()}function A(a,b){return b.abbr=a,pb[a]||(pb[a]=new e),pb[a].set(b),pb[a]}function B(a){delete pb[a]}function C(a){var b,c,d,e,f=0,g=function(a){if(!pb[a]&&rb)try{require("./lang/"+a)}catch(b){}return pb[a]};if(!a)return db.fn._lang;if(!m(a)){if(c=g(a))return c;a=[a]}for(;f<a.length;){for(e=y(a[f]).split("-"),b=e.length,d=y(a[f+1]),d=d?d.split("-"):null;b>0;){if(c=g(e.slice(0,b).join("-")))return c;if(d&&d.length>=b&&o(e,d,!0)>=b-1)break;b--}f++}return db.fn._lang}function D(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function E(a){var b,c,d=a.match(vb);for(b=0,c=d.length;c>b;b++)d[b]=Yb[d[b]]?Yb[d[b]]:D(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function F(a,b){return a.isValid()?(b=G(b,a.lang()),Vb[b]||(Vb[b]=E(b)),Vb[b](a)):a.lang().invalidDate()}function G(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(wb.lastIndex=0;d>=0&&wb.test(a);)a=a.replace(wb,c),wb.lastIndex=0,d-=1;return a}function H(a,b){var c,d=b._strict;switch(a){case"DDDD":return Ib;case"YYYY":case"GGGG":case"gggg":return d?Jb:zb;case"Y":case"G":case"g":return Lb;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?Kb:Ab;case"S":if(d)return Gb;case"SS":if(d)return Hb;case"SSS":if(d)return Ib;case"DDD":return yb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Cb;case"a":case"A":return C(b._l)._meridiemParse;case"X":return Fb;case"Z":case"ZZ":return Db;case"T":return Eb;case"SSSS":return Bb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Hb:xb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return xb;default:return c=new RegExp(P(O(a.replace("\\","")),"i"))}}function I(a){a=a||"";var b=a.match(Db)||[],c=b[b.length-1]||[],d=(c+"").match(Qb)||["-",0,0],e=+(60*d[1])+s(d[2]);return"+"===d[0]?-e:e}function J(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":null!=b&&(e[jb]=s(b)-1);break;case"MMM":case"MMMM":d=C(c._l).monthsParse(b),null!=d?e[jb]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[kb]=s(b));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=s(b));break;case"YY":e[ib]=s(b)+(s(b)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":e[ib]=s(b);break;case"a":case"A":c._isPm=C(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[lb]=s(b);break;case"m":case"mm":e[mb]=s(b);break;case"s":case"ss":e[nb]=s(b);break;case"S":case"SS":case"SSS":case"SSSS":e[ob]=s(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=I(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function K(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=M(a),a._w&&null==a._a[kb]&&null==a._a[jb]&&(f=function(b){var c=parseInt(b,10);return b?b.length<3?c>68?1900+c:2e3+c:c:null==a._a[ib]?db().weekYear():a._a[ib]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=Z(f(g.GG),g.W||1,g.E,4,1):(i=C(a._l),j=null!=g.d?V(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=Z(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[ib]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[ib]?d[ib]:a._a[ib],a._dayOfYear>u(e)&&(a._pf._overflowDayOfYear=!0),c=U(e,0,a._dayOfYear),a._a[jb]=c.getUTCMonth(),a._a[kb]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=l[b]=d[b];for(;7>b;b++)a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];l[lb]+=s((a._tzm||0)/60),l[mb]+=s((a._tzm||0)%60),a._d=(a._useUTC?U:T).apply(null,l)}}function L(a){var b;a._d||(b=q(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],K(a))}function M(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function N(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=C(a._l),h=""+a._i,i=h.length,j=0;for(d=G(a._f,g).match(vb)||[],b=0;b<d.length;b++)e=d[b],c=(h.match(H(e,a))||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),Yb[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),J(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[lb]<12&&(a._a[lb]+=12),a._isPm===!1&&12===a._a[lb]&&(a._a[lb]=0),K(a),w(a)}function O(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function P(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a){var c,d,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,c=h({},a),c._pf=b(),c._f=a._f[f],N(c),x(c)&&(g+=c._pf.charsLeftOver,g+=10*c._pf.unusedTokens.length,c._pf.score=g,(null==e||e>g)&&(e=g,d=c));h(a,d||c)}function R(a){var b,c,d=a._i,e=Mb.exec(d);if(e){for(a._pf.iso=!0,b=0,c=Ob.length;c>b;b++)if(Ob[b][1].exec(d)){a._f=Ob[b][0]+(e[6]||" ");break}for(b=0,c=Pb.length;c>b;b++)if(Pb[b][1].exec(d)){a._f+=Pb[b][0];break}d.match(Db)&&(a._f+="Z"),N(a)}else a._d=new Date(d)}function S(b){var c=b._i,d=sb.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?R(b):m(c)?(b._a=c.slice(0),K(b)):n(c)?b._d=new Date(+c):"object"==typeof c?L(b):b._d=new Date(c)}function T(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function U(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function V(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function W(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function X(a,b,c){var d=hb(Math.abs(a)/1e3),e=hb(d/60),f=hb(e/60),g=hb(f/24),h=hb(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",hb(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,W.apply({},i)}function Y(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=db(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function Z(a,b,c,d,e){var f,g,h=U(a,0,1).getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:u(a-1)+g}}function $(a){var b=a._i,c=a._f;return null===b?db.invalid({nullInput:!0}):("string"==typeof b&&(a._i=b=C().preparse(b)),db.isMoment(b)?(a=i(b),a._d=new Date(+b._d)):c?m(c)?Q(a):N(a):S(a),new f(a))}function _(a,b){db.fn[a]=db.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),db.updateOffset(this),this):this._d["get"+c+b]()}}function ab(a){db.duration.fn[a]=function(){return this._data[a]}}function bb(a,b){db.duration.fn["as"+a]=function(){return+this/b}}function cb(a){var b=!1,c=db;"undefined"==typeof ender&&(a?(gb.moment=function(){return!b&&console&&console.warn&&(b=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),c.apply(null,arguments)},h(gb.moment,c)):gb.moment=db)}for(var db,eb,fb="2.5.1",gb=this,hb=Math.round,ib=0,jb=1,kb=2,lb=3,mb=4,nb=5,ob=6,pb={},qb={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},rb="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,sb=/^\/?Date\((\-?\d+)/i,tb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ub=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,vb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,wb=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,xb=/\d\d?/,yb=/\d{1,3}/,zb=/\d{1,4}/,Ab=/[+\-]?\d{1,6}/,Bb=/\d+/,Cb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Db=/Z|[\+\-]\d\d:?\d\d/gi,Eb=/T/i,Fb=/[\+\-]?\d+(\.\d{1,3})?/,Gb=/\d/,Hb=/\d\d/,Ib=/\d{3}/,Jb=/\d{4}/,Kb=/[+-]?\d{6}/,Lb=/[+-]?\d+/,Mb=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Nb="YYYY-MM-DDTHH:mm:ssZ",Ob=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Pb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Qb=/([\+\-]|\d\d)/gi,Rb="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Sb={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Tb={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ub={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Vb={},Wb="DDD w W M D d".split(" "),Xb="M D H h m s w W".split(" "),Yb={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return k(this.year()%100,2)},YYYY:function(){return k(this.year(),4)},YYYYY:function(){return k(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+k(Math.abs(a),6)},gg:function(){return k(this.weekYear()%100,2)},gggg:function(){return k(this.weekYear(),4)},ggggg:function(){return k(this.weekYear(),5)},GG:function(){return k(this.isoWeekYear()%100,2)},GGGG:function(){return k(this.isoWeekYear(),4)},GGGGG:function(){return k(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return s(this.milliseconds()/100)},SS:function(){return k(s(this.milliseconds()/10),2)},SSS:function(){return k(this.milliseconds(),3)},SSSS:function(){return k(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+":"+k(s(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+k(s(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Zb=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Wb.length;)eb=Wb.pop(),Yb[eb+"o"]=d(Yb[eb],eb);for(;Xb.length;)eb=Xb.pop(),Yb[eb+eb]=c(Yb[eb],2);for(Yb.DDDD=c(Yb.DDD,3),h(e.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=db.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=db([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return Y(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),db=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=c,g._f=d,g._l=e,g._strict=f,g._isUTC=!1,g._pf=b(),$(g)},db.utc=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=c,g._f=d,g._strict=f,g._pf=b(),$(g).utc()},db.unix=function(a){return db(1e3*a)},db.duration=function(a,b){var c,d,e,f=a,h=null;return db.isDuration(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(h=tb.exec(a))?(c="-"===h[1]?-1:1,f={y:0,d:s(h[kb])*c,h:s(h[lb])*c,m:s(h[mb])*c,s:s(h[nb])*c,ms:s(h[ob])*c}):(h=ub.exec(a))&&(c="-"===h[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},f={y:e(h[2]),M:e(h[3]),d:e(h[4]),h:e(h[5]),m:e(h[6]),s:e(h[7]),w:e(h[8])}),d=new g(f),db.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},db.version=fb,db.defaultFormat=Nb,db.updateOffset=function(){},db.lang=function(a,b){var c;return a?(b?A(y(a),b):null===b?(B(a),a="en"):pb[a]||C(a),c=db.duration.fn._lang=db.fn._lang=C(a),c._abbr):db.fn._lang._abbr},db.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),C(a)},db.isMoment=function(a){return a instanceof f||null!=a&&a.hasOwnProperty("_isAMomentObject")},db.isDuration=function(a){return a instanceof g},eb=Zb.length-1;eb>=0;--eb)r(Zb[eb]);for(db.normalizeUnits=function(a){return p(a)},db.invalid=function(a){var b=db.utc(0/0);return null!=a?h(b._pf,a):b._pf.userInvalidated=!0,b},db.parseZone=function(a){return db(a).parseZone()},h(db.fn=f.prototype,{clone:function(){return db(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=db(this).utc();return 0<a.year()&&a.year()<=9999?F(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return this._a?this.isValid()&&o(this._a,(this._isUTC?db.utc(this._a):db(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=F(this,a||db.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?db.duration(+b,a):db.duration(a,b),l(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?db.duration(+b,a):db.duration(a,b),l(this,c,-1),this},diff:function(a,b,c){var d,e,f=z(a,this),g=6e4*(this.zone()-f.zone());return b=p(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-db(this).startOf("month")-(f-db(f).startOf("month")))/d,e-=6e4*(this.zone()-db(this).startOf("month").zone()-(f.zone()-db(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:j(e)},from:function(a,b){return db.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(db(),a)},calendar:function(){var a=z(db(),this).startOf("day"),b=this.diff(a,"days",!0),c=-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse";return this.format(this.lang().calendar(c,this))},isLeapYear:function(){return v(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=V(a,this.lang()),this.add({d:a-b})):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),db.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=p(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),this},endOf:function(a){return a=p(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+db(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+db(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+z(a,this).startOf(b)},min:function(a){return a=db.apply(null,arguments),this>a?this:a},max:function(a){return a=db.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=I(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&l(this,db.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?db(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return t(this.year(),this.month())},dayOfYear:function(a){var b=hb((db(this).startOf("day")-db(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(a){var b=Y(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=Y(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=Y(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){return a=p(a),this[a]()},set:function(a,b){return a=p(a),"function"==typeof this[a]&&this[a](b),this},lang:function(b){return b===a?this._lang:(this._lang=C(b),this)}}),eb=0;eb<Rb.length;eb++)_(Rb[eb].toLowerCase().replace(/s$/,""),Rb[eb]);_("year","FullYear"),db.fn.days=db.fn.day,db.fn.months=db.fn.month,db.fn.weeks=db.fn.week,db.fn.isoWeeks=db.fn.isoWeek,db.fn.toJSON=db.fn.toISOString,h(db.duration.fn=g.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,h=this._data;h.milliseconds=e%1e3,a=j(e/1e3),h.seconds=a%60,b=j(a/60),h.minutes=b%60,c=j(b/60),h.hours=c%24,f+=j(c/24),h.days=f%30,g+=j(f/30),h.months=g%12,d=j(g/12),h.years=d},weeks:function(){return j(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*s(this._months/12)},humanize:function(a){var b=+this,c=X(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=db.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=db.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=p(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=p(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:db.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(eb in Sb)Sb.hasOwnProperty(eb)&&(bb(eb,Sb[eb]),ab(eb.toLowerCase()));bb("Weeks",6048e5),db.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},db.lang("en",{ordinal:function(a){var b=a%10,c=1===s(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),rb?(module.exports=db,cb(!0)):"function"==typeof define&&define.amd?define("moment",function(b,c,d){return d.config&&d.config()&&d.config().noGlobal!==!0&&cb(d.config().noGlobal===a),db}):cb()}.call(this),function($){var ColorPicker=function(){var charMin=65,tpl='<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>',defaults={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!1},fillRGBFields=function(hsb,cal){var rgb=HSBToRGB(hsb);$(cal).data("colorpicker").fields.eq(1).val(rgb.r).end().eq(2).val(rgb.g).end().eq(3).val(rgb.b).end()},fillHSBFields=function(hsb,cal){$(cal).data("colorpicker").fields.eq(4).val(hsb.h).end().eq(5).val(hsb.s).end().eq(6).val(hsb.b).end()},fillHexFields=function(hsb,cal){$(cal).data("colorpicker").fields.eq(0).val(HSBToHex(hsb)).end()},setSelector=function(hsb,cal){$(cal).data("colorpicker").selector.css("backgroundColor","#"+HSBToHex({h:hsb.h,s:100,b:100})),$(cal).data("colorpicker").selectorIndic.css({left:parseInt(150*hsb.s/100,10),top:parseInt(150*(100-hsb.b)/100,10)})},setHue=function(hsb,cal){$(cal).data("colorpicker").hue.css("top",parseInt(150-150*hsb.h/360,10))},setCurrentColor=function(hsb,cal){$(cal).data("colorpicker").currentColor.css("backgroundColor","#"+HSBToHex(hsb))},setNewColor=function(hsb,cal){$(cal).data("colorpicker").newColor.css("backgroundColor","#"+HSBToHex(hsb))},keyDown=function(ev){var pressedKey=ev.charCode||ev.keyCode||-1;if(pressedKey>charMin&&90>=pressedKey||32==pressedKey)return!1;var cal=$(this).parent().parent();cal.data("colorpicker").livePreview===!0&&change.apply(this)},change=function(ev){var col,cal=$(this).parent().parent();cal.data("colorpicker").color=col=this.parentNode.className.indexOf("_hex")>0?HexToHSB(fixHex(this.value)):this.parentNode.className.indexOf("_hsb")>0?fixHSB({h:parseInt(cal.data("colorpicker").fields.eq(4).val(),10),s:parseInt(cal.data("colorpicker").fields.eq(5).val(),10),b:parseInt(cal.data("colorpicker").fields.eq(6).val(),10)}):RGBToHSB(fixRGB({r:parseInt(cal.data("colorpicker").fields.eq(1).val(),10),g:parseInt(cal.data("colorpicker").fields.eq(2).val(),10),b:parseInt(cal.data("colorpicker").fields.eq(3).val(),10)})),ev&&(fillRGBFields(col,cal.get(0)),fillHexFields(col,cal.get(0)),fillHSBFields(col,cal.get(0))),setSelector(col,cal.get(0)),setHue(col,cal.get(0)),setNewColor(col,cal.get(0)),cal.data("colorpicker").onChange.apply(cal,[col,HSBToHex(col),HSBToRGB(col)])},blur=function(){var cal=$(this).parent().parent();cal.data("colorpicker").fields.parent().removeClass("colorpicker_focus")},focus=function(){charMin=this.parentNode.className.indexOf("_hex")>0?70:65,$(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),$(this).parent().addClass("colorpicker_focus")},downIncrement=function(ev){var field=$(this).parent().find("input").focus(),current={el:$(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:ev.pageY,field:field,val:parseInt(field.val(),10),preview:$(this).parent().parent().data("colorpicker").livePreview};$(document).bind("mouseup",current,upIncrement),$(document).bind("mousemove",current,moveIncrement)},moveIncrement=function(ev){return ev.data.field.val(Math.max(0,Math.min(ev.data.max,parseInt(ev.data.val+ev.pageY-ev.data.y,10)))),ev.data.preview&&change.apply(ev.data.field.get(0),[!0]),!1},upIncrement=function(ev){return change.apply(ev.data.field.get(0),[!0]),ev.data.el.removeClass("colorpicker_slider").find("input").focus(),$(document).unbind("mouseup",upIncrement),$(document).unbind("mousemove",moveIncrement),!1},downHue=function(){var current={cal:$(this).parent(),y:$(this).offset().top};current.preview=current.cal.data("colorpicker").livePreview,$(document).bind("mouseup",current,upHue),$(document).bind("mousemove",current,moveHue)},moveHue=function(ev){return change.apply(ev.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,ev.pageY-ev.data.y)))/150,10)).get(0),[ev.data.preview]),!1},upHue=function(ev){return fillRGBFields(ev.data.cal.data("colorpicker").color,ev.data.cal.get(0)),fillHexFields(ev.data.cal.data("colorpicker").color,ev.data.cal.get(0)),$(document).unbind("mouseup",upHue),$(document).unbind("mousemove",moveHue),!1},downSelector=function(){var current={cal:$(this).parent(),pos:$(this).offset()};current.preview=current.cal.data("colorpicker").livePreview,$(document).bind("mouseup",current,upSelector),$(document).bind("mousemove",current,moveSelector)},moveSelector=function(ev){return change.apply(ev.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,ev.pageY-ev.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,ev.pageX-ev.data.pos.left))/150,10)).get(0),[ev.data.preview]),!1},upSelector=function(ev){return fillRGBFields(ev.data.cal.data("colorpicker").color,ev.data.cal.get(0)),fillHexFields(ev.data.cal.data("colorpicker").color,ev.data.cal.get(0)),$(document).unbind("mouseup",upSelector),$(document).unbind("mousemove",moveSelector),!1},enterSubmit=function(){$(this).addClass("colorpicker_focus")},leaveSubmit=function(){$(this).removeClass("colorpicker_focus")},clickSubmit=function(){var cal=$(this).parent(),col=cal.data("colorpicker").color;cal.data("colorpicker").origColor=col,setCurrentColor(col,cal.get(0)),cal.data("colorpicker").onSubmit(col,HSBToHex(col),HSBToRGB(col),cal.data("colorpicker").el)},show=function(){var cal=$("#"+$(this).data("colorpickerId"));cal.data("colorpicker").onBeforeShow.apply(this,[cal.get(0)]);var pos=$(this).offset(),viewPort=getViewport(),top=pos.top+this.offsetHeight,left=pos.left;return top+176>viewPort.t+viewPort.h&&(top-=this.offsetHeight+176),left+356>viewPort.l+viewPort.w&&(left-=356),cal.css({left:left+"px",top:top+"px"}),0!=cal.data("colorpicker").onShow.apply(this,[cal.get(0)])&&cal.show(),$(document).bind("mousedown",{cal:cal},hide),!1},hide=function(ev){isChildOf(ev.data.cal.get(0),ev.target,ev.data.cal.get(0))||(0!=ev.data.cal.data("colorpicker").onHide.apply(this,[ev.data.cal.get(0)])&&ev.data.cal.hide(),$(document).unbind("mousedown",hide))},isChildOf=function(parentEl,el,container){if(parentEl==el)return!0;if(parentEl.contains)return parentEl.contains(el);if(parentEl.compareDocumentPosition)return!!(16&parentEl.compareDocumentPosition(el));for(var prEl=el.parentNode;prEl&&prEl!=container;){if(prEl==parentEl)return!0;prEl=prEl.parentNode}return!1},getViewport=function(){var m="CSS1Compat"==document.compatMode;
return{l:window.pageXOffset||(m?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(m?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(m?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(m?document.documentElement.clientHeight:document.body.clientHeight)}},fixHSB=function(hsb){return{h:Math.min(360,Math.max(0,hsb.h)),s:Math.min(100,Math.max(0,hsb.s)),b:Math.min(100,Math.max(0,hsb.b))}},fixRGB=function(rgb){return{r:Math.min(255,Math.max(0,rgb.r)),g:Math.min(255,Math.max(0,rgb.g)),b:Math.min(255,Math.max(0,rgb.b))}},fixHex=function(hex){var len=6-hex.length;if(len>0){for(var o=[],i=0;len>i;i++)o.push("0");o.push(hex),hex=o.join("")}return hex},HexToRGB=function(hex){var hex=parseInt(hex.indexOf("#")>-1?hex.substring(1):hex,16);return{r:hex>>16,g:(65280&hex)>>8,b:255&hex}},HexToHSB=function(hex){return RGBToHSB(HexToRGB(hex))},RGBToHSB=function(rgb){var hsb={h:0,s:0,b:0},min=Math.min(rgb.r,rgb.g,rgb.b),max=Math.max(rgb.r,rgb.g,rgb.b),delta=max-min;return hsb.b=max,hsb.s=0!=max?255*delta/max:0,hsb.h=0!=hsb.s?rgb.r==max?(rgb.g-rgb.b)/delta:rgb.g==max?2+(rgb.b-rgb.r)/delta:4+(rgb.r-rgb.g)/delta:-1,hsb.h*=60,hsb.h<0&&(hsb.h+=360),hsb.s*=100/255,hsb.b*=100/255,hsb},HSBToRGB=function(hsb){var rgb={},h=Math.round(hsb.h),s=Math.round(255*hsb.s/100),v=Math.round(255*hsb.b/100);if(0==s)rgb.r=rgb.g=rgb.b=v;else{var t1=v,t2=(255-s)*v/255,t3=(t1-t2)*(h%60)/60;360==h&&(h=0),60>h?(rgb.r=t1,rgb.b=t2,rgb.g=t2+t3):120>h?(rgb.g=t1,rgb.b=t2,rgb.r=t1-t3):180>h?(rgb.g=t1,rgb.r=t2,rgb.b=t2+t3):240>h?(rgb.b=t1,rgb.r=t2,rgb.g=t1-t3):300>h?(rgb.b=t1,rgb.g=t2,rgb.r=t2+t3):360>h?(rgb.r=t1,rgb.g=t2,rgb.b=t1-t3):(rgb.r=0,rgb.g=0,rgb.b=0)}return{r:Math.round(rgb.r),g:Math.round(rgb.g),b:Math.round(rgb.b)}},RGBToHex=function(rgb){var hex=[rgb.r.toString(16),rgb.g.toString(16),rgb.b.toString(16)];return $.each(hex,function(nr,val){1==val.length&&(hex[nr]="0"+val)}),hex.join("")},HSBToHex=function(hsb){return RGBToHex(HSBToRGB(hsb))},restoreOriginal=function(){var cal=$(this).parent(),col=cal.data("colorpicker").origColor;cal.data("colorpicker").color=col,fillRGBFields(col,cal.get(0)),fillHexFields(col,cal.get(0)),fillHSBFields(col,cal.get(0)),setSelector(col,cal.get(0)),setHue(col,cal.get(0)),setNewColor(col,cal.get(0))};return{init:function(opt){if(opt=$.extend({},defaults,opt||{}),"string"==typeof opt.color)opt.color=HexToHSB(opt.color);else if(void 0!=opt.color.r&&void 0!=opt.color.g&&void 0!=opt.color.b)opt.color=RGBToHSB(opt.color);else{if(void 0==opt.color.h||void 0==opt.color.s||void 0==opt.color.b)return this;opt.color=fixHSB(opt.color)}return this.each(function(){if(!$(this).data("colorpickerId")){var options=$.extend({},opt);options.origColor=opt.color;var id="collorpicker_"+parseInt(1e3*Math.random());$(this).data("colorpickerId",id);var cal=$(tpl).attr("id",id);options.flat?cal.appendTo(this).show():cal.appendTo(document.body),options.fields=cal.find("input").bind("keyup",keyDown).bind("change",change).bind("blur",blur).bind("focus",focus),cal.find("span").bind("mousedown",downIncrement).end().find(">div.colorpicker_current_color").bind("click",restoreOriginal),options.selector=cal.find("div.colorpicker_color").bind("mousedown",downSelector),options.selectorIndic=options.selector.find("div div"),options.el=this,options.hue=cal.find("div.colorpicker_hue div"),cal.find("div.colorpicker_hue").bind("mousedown",downHue),options.newColor=cal.find("div.colorpicker_new_color"),options.currentColor=cal.find("div.colorpicker_current_color"),cal.data("colorpicker",options),cal.find("div.colorpicker_submit").bind("mouseenter",enterSubmit).bind("mouseleave",leaveSubmit).bind("click",clickSubmit),fillRGBFields(options.color,cal.get(0)),fillHSBFields(options.color,cal.get(0)),fillHexFields(options.color,cal.get(0)),setHue(options.color,cal.get(0)),setSelector(options.color,cal.get(0)),setCurrentColor(options.color,cal.get(0)),setNewColor(options.color,cal.get(0)),options.flat?cal.css({position:"relative",display:"block"}):$(this).bind(options.eventName,show)}})},showPicker:function(){return this.each(function(){$(this).data("colorpickerId")&&show.apply(this)})},hidePicker:function(){return this.each(function(){$(this).data("colorpickerId")&&$("#"+$(this).data("colorpickerId")).hide()})},setColor:function(col){if("string"==typeof col)col=HexToHSB(col);else if(void 0!=col.r&&void 0!=col.g&&void 0!=col.b)col=RGBToHSB(col);else{if(void 0==col.h||void 0==col.s||void 0==col.b)return this;col=fixHSB(col)}return this.each(function(){if($(this).data("colorpickerId")){var cal=$("#"+$(this).data("colorpickerId"));cal.data("colorpicker").color=col,cal.data("colorpicker").origColor=col,fillRGBFields(col,cal.get(0)),fillHSBFields(col,cal.get(0)),fillHexFields(col,cal.get(0)),setHue(col,cal.get(0)),setSelector(col,cal.get(0)),setCurrentColor(col,cal.get(0)),setNewColor(col,cal.get(0))}})}}}();$.fn.extend({ColorPicker:ColorPicker.init,ColorPickerHide:ColorPicker.hidePicker,ColorPickerShow:ColorPicker.showPicker,ColorPickerSetColor:ColorPicker.setColor})}(jQuery);var $load_img,load_count,load_start,load_end;load_count=0,$load_img=$("#ajaxloader"),load_start=function(){"use strict";0===load_count&&$load_img.fadeIn("fast"),load_count+=1},load_end=function(){"use strict";load_count>0&&(load_count-=1),0===load_count&&$load_img.fadeOut("slow")},$(document).ready(function(){"use strict";load_start(),$(".navbar").removeClass("navbar-fixed-top")});var $calendar,Events,calendar_started,events_fetched,init_calendar,is_editing,load_all_events,socket,start;$calendar=null,$(document).ready(function(){"use strict";var $cp,apply_color;$calendar=$("#calendar"),start(),$cp=$("#color-picker"),$cp.ColorPicker({onSubmit:function(hsb,hex,rgb,el){apply_color(hsb,hex,rgb,el)},onChange:function(hsb,hex,rgb){apply_color(hsb,hex,rgb,$cp)},onShow:function(colpkr){return $(colpkr).fadeIn(500),!1},onHide:function(colpkr){return $(colpkr).fadeOut(500),!1}}).bind("keyup",function(){$(this).ColorPickerSetColor(this.value)}),apply_color=function(hsb,hex,rgb,el){var color,scope;null===hex&&(hex=""),color=hex.split("#"),scope=$cp.scope(),scope.color_picker="",scope.color_picker="#"+color[color.length-1]+" | Your text will look like this.",$(el).css("background-color","#"+hex),$(el).val(scope.color_picker),scope.watch_predefined()}}),calendar_started=!1,events_fetched=!1,socket=null,start=function(){"use strict";socket=io.connect("/calendar"),socket.on("connect",function(){console.log("IO: Connected!"),load_end(),calendar_started||init_calendar()}),socket.on("message",function(data){console.log(data)}),socket.on("connecting",function(){console.log("IO: Connecting to /calendar..."),load_start()}),socket.on("update_event",function(event){load_start(),is_editing&&event.is_editable&&(event.editable=!0),Events.replace(event),load_end()})},load_all_events=function(){"use strict";load_start(),Events.find_all(function(err,events){void 0!==err&&load_end(),events.forEach(function(event){$calendar.fullCalendar("renderEvent",event)}),events_fetched=!0,load_end()})},init_calendar=function(){"use strict";var button_edit_calendar,height_calendar,options;calendar_started=!0,$calendar=$("#calendar"),height_calendar=$(window).height()-1.6*$(".navbar").height(),options={height:height_calendar,firstDay:1,defaultView:"agendaWeek",selectable:!0,selectHelper:!0,unselectAuto:!0,ignoreTimezone:!1,header:{left:"",center:"",right:"today prev,next month,agendaWeek,agendaDay"},buttonText:{prev:"←",next:"→",prevYear:"«",nextYear:"»",today:"today",month:"month",week:"week",day:"day"},dragRevertDuration:2e3,eventRevertDuration:3e3,eventAfterAllRender:function(){return load_end()},eventDrop:function(event,dayDelta,minuteDelta,allDay,revertFunc){event.editable?Events.update(event):revertFunc()},eventResize:function(event,dayDelta,minuteDelta,revertFunc){event.editable?Events.update(event):revertFunc()},eventClick:function(event){var $scope_popup;$scope_popup=$("#popup-show-event").scope(),$scope_popup.show(event)},viewRender:function(){$calendar.fullCalendar("removeEvents"),load_all_events()},select:function(startDate,endDate){var $scope_popup,event;event={start:startDate.toJSON(),end:endDate.toJSON(),title:"<Title - Change Me>",description:" Your description here ",color:"#6ba5c2",creating:!0},$scope_popup=$("#popup-edit-event").scope(),$scope_popup.edit(event)}},$calendar.fullCalendar(options),button_edit_calendar="<button id='edit-calendar' class='btn btn-success' >\n    <span class=\"glyphicon glyphicon-edit\">&emsp;Edit</span>\n</button>",$(".fc-header-left").html(button_edit_calendar),$("#edit-calendar").on("click",function(){toggle_edit()})},Events=function(){function Events(){}return Events.find_all=function(callback){socket.emit("get_events_list",null,function(err,response){err?console.log("Events@find_all: "+err):callback(err,response)})},Events.find_by_id=function(){},Events.find_by_title=function(){},Events.update=function(event,callback){load_start(),socket.emit("update_event",event,function(err,response){err?alert("An error has occured... maybe your internet connection ?"):response.response!==!0&&alert("This event has not been saved. Maybe you dont have rights on it ?"),load_end(),callback&&response.response===!0&&callback(event)})},Events.replace=function(event){$calendar.fullCalendar("removeEvents",event.id),$calendar.fullCalendar("renderEvent",event)},Events}(),this.popup_show_event=function($scope,$sce){"use strict";var $popup_show,event_backup;$scope.disabled=!0,$scope.priority=1,event_backup=null,$popup_show=$("#popup-show-event"),$scope.show=function(event){$scope.title=event.title,$scope.description=$sce.trustAsHtml(event.description),event.start&&($scope.start=moment(event.start).format("MMMM Do YYYY, h:mm:ss a")),event.end&&($scope.end=moment(event.end).format("MMMM Do YYYY, h:mm:ss a")),$scope.priority=event.priority,$scope.disabled=!event.editable,event_backup=event,$scope.$apply(),$("#color-row").css({"background-color":event.color,"box-shadow":"0 0 5px "+event.color}),$popup_show.modal("show"),toggle_edit()},$scope.edit=function(){var scope;scope=$("#popup-edit-event").scope(),$scope.close(),scope.edit(event_backup)},$scope.close=function(){toggle_edit(),$popup_show.modal("hide")}},this.popup_edit_event=function($scope){"use strict";var $popup_edit,event_backup,get_color_picker_value;$scope.title="",$popup_edit=$("#popup-edit-event"),event_backup=null,$scope.color_map=[{name:"Custom   →",color:null,id:0},{name:"Insignificant - Gray",color:"#8c8c8c",id:1},{name:"Normal - Blue",color:"#6ba5c2",id:2},{name:"Important - Orange",color:"#ffa12f",id:3},{name:"Mandatory - Red",color:"#ff5252",id:4}],$scope.color=0,$scope.color_picker="",$scope.color_picker_style={"background-color":$scope.color_picker},get_color_picker_value=function(){return $scope.color_picker.split(" |")[0]},$scope.reset_picker=function(){$scope.color_picker=event_backup.color,$scope.color_picker_style["background-color"]=event_backup.color},$scope.apply_predefined=function(){var color;color=get_color_picker_value(),$scope.color>0&&(color=$scope.color_map[$scope.color].color),$scope.color_picker=color,$scope.color_picker_style["background-color"]=color},$scope.watch_predefined=function(){var color_picker_value,found;return color_picker_value=get_color_picker_value(),found=!1,$scope.color_map.forEach(function(color,index){color.color&&(console.log(color_picker_value+"|"+color.color),color_picker_value.toLowerCase()===color.color.toLowerCase()&&($scope.color=index,found=!0))}),found||($scope.color=0),"$apply"!==$scope.$root.$$phase&&"$digest"!==$scope.$root.$$phase?$scope.$apply():void 0},$scope.edit=function(event){var desc,picker_date_end,picker_date_start,picker_time_end,picker_time_start,unix_time_end,unix_time_start;event_backup=event,$scope.title=event.title,$scope.reset_picker(),$scope.watch_predefined(),$popup_edit.modal("show"),toggle_edit(),picker_date_start=$popup_edit.find("#date-start").pickadate().pickadate("picker"),picker_time_start=$popup_edit.find("#time-start").pickatime().pickatime("picker"),picker_date_end=$popup_edit.find("#date-end").pickadate().pickadate("picker"),picker_time_end=$popup_edit.find("#time-end").pickatime().pickatime("picker"),unix_time_start=new Date(event.start),event.end&&(unix_time_end=new Date(event.end)),unix_time_end&&picker_date_start.set("max",unix_time_end),picker_date_start.set("select",unix_time_start),unix_time_end&&picker_time_start.set("max",unix_time_end),picker_time_start.set("select",unix_time_start),picker_date_end.set("min",unix_time_start),picker_date_end.set("select",unix_time_end),picker_time_end.set("min",unix_time_start),picker_time_end.set("select",unix_time_end),desc=event.description,console.log(desc),setTimeout(function(){CKEDITOR.instances.editor.setData(desc)},500)},$scope.save=function(){var date_end,date_start,event,select_date_end,select_date_start,select_time_end,select_time_start;event=event_backup,event.title=$scope.title,event.description=CKEDITOR.instances.editor.getData(),select_date_start=$("#date-start").pickadate().pickadate("picker").get("select"),select_time_start=$("#time-start").pickatime().pickatime("picker").get("select"),select_date_end=$("#date-end").pickadate().pickadate("picker").get("select"),select_time_end=$("#time-end").pickatime().pickatime("picker").get("select"),date_start=new Date(select_date_start.pick),date_start.setHours(select_time_start.hour),date_start.setMinutes(select_time_start.mins),date_end=new Date(select_date_end.pick),date_end.setHours(select_time_end.hour),date_end.setMinutes(select_time_end.mins),event.start=date_start.toJSON(),event.end=date_end.toJSON(),event.color=get_color_picker_value(),console.log($scope.color_picker),Events.update(event,function(event){var scope;scope=$("#popup-show-event").scope(),event.editable=!0,scope.show(event),$scope.close()})},$scope.close=function(){$popup_edit.modal("hide"),toggle_edit()}},is_editing=!1,this.toggle_edit=function(){"use strict";var $btn,list;is_editing=!is_editing,$btn=$("#edit-calendar span"),is_editing?($btn.html("&nbsp;&nbsp;Stop Editing"),$btn.toggleClass("glyphicon-edit"),$btn.toggleClass("glyphicon-check")):($btn.html("&nbsp;&nbsp;Edit"),$btn.toggleClass("glyphicon-edit"),$btn.toggleClass("glyphicon-check")),list=$calendar.fullCalendar("clientEvents"),list.forEach(function(event){is_editing?event.is_editable===!0&&(event.editable=!0):event.is_editable===!0&&(event.editable=!1),Events.replace(event)})};
// Generated by CoffeeScript 1.6.3
(function() {
  var bind_users, sanitize, socket;

  socket = io.connect("/home");

  socket.on('connect', function() {
    console.log("IO: Connected!");
    return socket.on("message", function(data) {
      return console.log("Message from server: " + data);
    });
  });

  socket.on('connecting', function() {
    return console.log("IO: Connecting to /home...");
  });

  /*
  inject_into_users = (array)->
  	elem = angular.element(
  			document.querySelector
  		)
  */


  bind_users = null;

  $(window).on('load', function() {
    var bind_users_back;
    bind_users = function() {
      return $(".user").on("mouseenter", function(e) {
        var options;
        if (!$(this).is(":animated")) {
          sanitize(e, $(this));
          $(this).off("mouseenter");
          bind_users_back();
          options = {
            direction: "tb",
            content: "Image ICI, ou inverse",
            speed: 100
          };
          return $(this).flip(options);
        }
      });
    };
    bind_users_back = function() {
      return $(".user").on("mouseout", function(e) {
        console.log("click");
        if (!$(this).is(":animated")) {
          sanitize(e, $(this));
          $(this).off("mouseout");
          bind_users();
          return $(this).revertFlip();
        }
      });
    };
    return bind_users();
  });

  this.User_Manager = function($scope) {
    $scope.list = [];
    $scope.get_users = function() {
      return socket.emit('get_users_list', null, function(response) {
        var interval;
        $scope.list = response;
        console.log("User list saved");
        $scope.$apply();
        return interval = setInterval(function() {
          if (bind_users) {
            clearInterval(interval);
            return bind_users();
          }
        }, 50);
      });
    };
    return $scope.get_users();
  };

  sanitize = function(event, jqueryObject) {
    event.preventDefault();
    event.stopPropagation();
    if (jqueryObject.is(":animated")) {
      jqueryObject.stop();
      return jqueryObject.clearQueue();
    }
  };

}).call(this);
